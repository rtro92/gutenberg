"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[2667],{"./packages/a11y/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>speak});var build_module=__webpack_require__("./packages/i18n/build-module/index.js");function addContainer(ariaLive="polite"){const container=document.createElement("div");container.id=`a11y-speak-${ariaLive}`,container.className="a11y-speak-region",container.setAttribute("style","position: absolute;margin: -1px;padding: 0;height: 1px;width: 1px;overflow: hidden;clip: rect(1px, 1px, 1px, 1px);-webkit-clip-path: inset(50%);clip-path: inset(50%);border: 0;word-wrap: normal !important;"),container.setAttribute("aria-live",ariaLive),container.setAttribute("aria-relevant","additions text"),container.setAttribute("aria-atomic","true");const{body}=document;return body&&body.appendChild(container),container}let previousMessage="";function speak(message,ariaLive){!function clear(){const regions=document.getElementsByClassName("a11y-speak-region"),introText=document.getElementById("a11y-speak-intro-text");for(let i=0;i<regions.length;i++)regions[i].textContent="";introText&&introText.setAttribute("hidden","hidden")}(),message=function filterMessage(message){return message=message.replace(/<[^<>]+>/g," "),previousMessage===message&&(message+="Â "),previousMessage=message,message}(message);const introText=document.getElementById("a11y-speak-intro-text"),containerAssertive=document.getElementById("a11y-speak-assertive"),containerPolite=document.getElementById("a11y-speak-polite");containerAssertive&&"assertive"===ariaLive?containerAssertive.textContent=message:containerPolite&&(containerPolite.textContent=message),introText&&introText.removeAttribute("hidden")}!function domReady(callback){"undefined"!=typeof document&&("complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",callback):callback())}((function setup(){const introText=document.getElementById("a11y-speak-intro-text"),containerAssertive=document.getElementById("a11y-speak-assertive"),containerPolite=document.getElementById("a11y-speak-polite");null===introText&&function addIntroText(){const introText=document.createElement("p");introText.id="a11y-speak-intro-text",introText.className="a11y-speak-intro-text",introText.textContent=(0,build_module.__)("Notifications"),introText.setAttribute("style","position: absolute;margin: -1px;padding: 0;height: 1px;width: 1px;overflow: hidden;clip: rect(1px, 1px, 1px, 1px);-webkit-clip-path: inset(50%);clip-path: inset(50%);border: 0;word-wrap: normal !important;"),introText.setAttribute("hidden","hidden");const{body}=document;return body&&body.appendChild(introText),introText}(),null===containerAssertive&&addContainer("assertive"),null===containerPolite&&addContainer("polite")}))},"./packages/components/src/dropdown-menu/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>DropdownMenu,Z:()=>__WEBPACK_DEFAULT_EXPORT__});var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_wordpress_icons__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/icons/build-module/library/menu.js"),_ui_context__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/src/ui/context/use-context-system.js"),_ui_context__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/components/src/ui/context/context-connect.ts"),_button__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/components/src/button/index.tsx"),_dropdown__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/components/src/dropdown/index.tsx"),_navigable_container__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/components/src/navigable-container/menu.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function mergeProps(defaultProps={},props={}){const mergedProps={...defaultProps,...props};return props.className&&defaultProps.className&&(mergedProps.className=classnames__WEBPACK_IMPORTED_MODULE_0___default()(props.className,defaultProps.className)),mergedProps}function isFunction(maybeFunc){return"function"==typeof maybeFunc}function UnconnectedDropdownMenu(dropdownMenuProps){const{children,className,controls,icon=_wordpress_icons__WEBPACK_IMPORTED_MODULE_2__.Z,label,popoverProps,toggleProps,menuProps,disableOpenOnArrowDown=!1,text,noIcons,variant}=(0,_ui_context__WEBPACK_IMPORTED_MODULE_3__.y)(dropdownMenuProps,"DropdownMenu");if(!controls?.length&&!isFunction(children))return null;let controlSets;controls?.length&&(controlSets=controls,Array.isArray(controlSets[0])||(controlSets=[controls]));const mergedPopoverProps=mergeProps({className:"components-dropdown-menu__popover",variant},popoverProps);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_dropdown__WEBPACK_IMPORTED_MODULE_4__.Z,{className,popoverProps:mergedPopoverProps,renderToggle:({isOpen,onToggle})=>{var _toggleProps$showTool;const{as:Toggle=_button__WEBPACK_IMPORTED_MODULE_5__.ZP,...restToggleProps}=null!=toggleProps?toggleProps:{},mergedToggleProps=mergeProps({className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-dropdown-menu__toggle",{"is-opened":isOpen})},restToggleProps);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Toggle,{...mergedToggleProps,icon,onClick:event=>{onToggle(),mergedToggleProps.onClick&&mergedToggleProps.onClick(event)},onKeyDown:event=>{(event=>{disableOpenOnArrowDown||isOpen||"ArrowDown"!==event.code||(event.preventDefault(),onToggle())})(event),mergedToggleProps.onKeyDown&&mergedToggleProps.onKeyDown(event)},"aria-haspopup":"true","aria-expanded":isOpen,label,text,showTooltip:null===(_toggleProps$showTool=toggleProps?.showTooltip)||void 0===_toggleProps$showTool||_toggleProps$showTool,children:mergedToggleProps.children})},renderContent:props=>{const mergedMenuProps=mergeProps({"aria-label":label,className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-dropdown-menu__menu",{"no-icons":noIcons})},menuProps);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_navigable_container__WEBPACK_IMPORTED_MODULE_6__.ZP,{...mergedMenuProps,role:"menu",children:[isFunction(children)?children(props):null,controlSets?.flatMap(((controlSet,indexOfSet)=>controlSet.map(((control,indexOfControl)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_button__WEBPACK_IMPORTED_MODULE_5__.ZP,{onClick:event=>{event.stopPropagation(),props.onClose(),control.onClick&&control.onClick()},className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-dropdown-menu__menu-item",{"has-separator":indexOfSet>0&&0===indexOfControl,"is-active":control.isActive,"is-icon-only":!control.title}),icon:control.icon,label:control.label,"aria-checked":"menuitemcheckbox"===control.role||"menuitemradio"===control.role?control.isActive:void 0,role:"menuitemcheckbox"===control.role||"menuitemradio"===control.role?control.role:"menuitem",disabled:control.isDisabled,children:control.title},[indexOfSet,indexOfControl].join())))))]})}})}UnconnectedDropdownMenu.displayName="UnconnectedDropdownMenu";const DropdownMenu=(0,_ui_context__WEBPACK_IMPORTED_MODULE_7__.Kc)(UnconnectedDropdownMenu,"DropdownMenu"),__WEBPACK_DEFAULT_EXPORT__=DropdownMenu},"./packages/components/src/dropdown/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/compose/build-module/hooks/use-merge-refs/index.js"),_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/deprecated/build-module/index.js"),_ui_context__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/src/ui/context/use-context-system.js"),_ui_context__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/components/src/ui/context/context-connect.ts"),_popover__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/components/src/popover/index.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const UnconnectedDropdown=(props,forwardedRef)=>{const{renderContent,renderToggle,className,contentClassName,expandOnMobile,headerTitle,focusOnMount,popoverProps,onClose,onToggle,style,position,variant}=(0,_ui_context__WEBPACK_IMPORTED_MODULE_3__.y)(props,"Dropdown");void 0!==position&&(0,_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_4__.Z)("`position` prop in wp.components.Dropdown",{since:"6.2",alternative:"`popoverProps.placement` prop",hint:"Note that the `position` prop will override any values passed through the `popoverProps.placement` prop."});const[fallbackPopoverAnchor,setFallbackPopoverAnchor]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useState)(null),containerRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useRef)(),[isOpen,setIsOpen]=function useObservableState(initialState,onStateChange){const[state,setState]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useState)(initialState);return[state,value=>{setState(value),onStateChange&&onStateChange(value)}]}(!1,onToggle);function close(){onClose&&onClose(),setIsOpen(!1)}(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useEffect)((()=>()=>{onToggle&&isOpen&&onToggle(!1)}),[onToggle,isOpen]);const args={isOpen,onToggle:function toggle(){setIsOpen(!isOpen)},onClose:close},popoverPropsHaveAnchor=!!(popoverProps?.anchor||popoverProps?.anchorRef||popoverProps?.getAnchorRect||popoverProps?.anchorRect);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className,ref:(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_5__.Z)([containerRef,forwardedRef,setFallbackPopoverAnchor]),tabIndex:-1,style,children:[renderToggle(args),isOpen&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_popover__WEBPACK_IMPORTED_MODULE_6__.ZP,{position,onClose:close,onFocusOutside:function closeIfFocusOutside(){if(!containerRef.current)return;const{ownerDocument}=containerRef.current,dialog=ownerDocument?.activeElement?.closest('[role="dialog"]');containerRef.current.contains(ownerDocument.activeElement)||dialog&&!dialog.contains(containerRef.current)||close()},expandOnMobile,headerTitle,focusOnMount,offset:13,anchor:popoverPropsHaveAnchor?void 0:fallbackPopoverAnchor,variant,...popoverProps,className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-dropdown__content",popoverProps?.className,contentClassName),children:renderContent(args)})]})};UnconnectedDropdown.displayName="UnconnectedDropdown";const __WEBPACK_DEFAULT_EXPORT__=(0,_ui_context__WEBPACK_IMPORTED_MODULE_7__.Iq)(UnconnectedDropdown,"Dropdown")},"./packages/components/src/grid/component.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>grid_component});var context_connect=__webpack_require__("./packages/components/src/ui/context/context-connect.ts"),component=__webpack_require__("./packages/components/src/view/component.tsx"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),react=__webpack_require__("./node_modules/react/index.js"),use_context_system=__webpack_require__("./packages/components/src/ui/context/use-context-system.js");const ALIGNMENTS={bottom:{alignItems:"flex-end",justifyContent:"center"},bottomLeft:{alignItems:"flex-start",justifyContent:"flex-end"},bottomRight:{alignItems:"flex-end",justifyContent:"flex-end"},center:{alignItems:"center",justifyContent:"center"},spaced:{alignItems:"center",justifyContent:"space-between"},left:{alignItems:"center",justifyContent:"flex-start"},right:{alignItems:"center",justifyContent:"flex-end"},stretch:{alignItems:"stretch"},top:{alignItems:"flex-start",justifyContent:"center"},topLeft:{alignItems:"flex-start",justifyContent:"flex-start"},topRight:{alignItems:"flex-start",justifyContent:"flex-end"}};var use_responsive_value=__webpack_require__("./packages/components/src/ui/utils/use-responsive-value.ts"),config_values=__webpack_require__("./packages/components/src/utils/config-values.js"),use_cx=__webpack_require__("./packages/components/src/utils/hooks/use-cx.ts");function useGrid(props){const{align,alignment,className,columnGap,columns=2,gap=3,isInline=!1,justify,rowGap,rows,templateColumns,templateRows,...otherProps}=(0,use_context_system.y)(props,"Grid"),columnsAsArray=Array.isArray(columns)?columns:[columns],column=(0,use_responsive_value.V)(columnsAsArray),rowsAsArray=Array.isArray(rows)?rows:[rows],row=(0,use_responsive_value.V)(rowsAsArray),gridTemplateColumns=templateColumns||!!columns&&`repeat( ${column}, 1fr )`,gridTemplateRows=templateRows||!!rows&&`repeat( ${row}, 1fr )`,cx=(0,use_cx.I)();return{...otherProps,className:(0,react.useMemo)((()=>{const alignmentProps=function getAlignmentProps(alignment){return alignment?ALIGNMENTS[alignment]:{}}(alignment),gridClasses=(0,emotion_react_browser_esm.iv)({alignItems:align,display:isInline?"inline-grid":"grid",gap:`calc( ${config_values.Z.gridBase} * ${gap} )`,gridTemplateColumns:gridTemplateColumns||void 0,gridTemplateRows:gridTemplateRows||void 0,gridRowGap:rowGap,gridColumnGap:columnGap,justifyContent:justify,verticalAlign:isInline?"middle":void 0,...alignmentProps},"","");return cx(gridClasses,className)}),[align,alignment,className,columnGap,cx,gap,gridTemplateColumns,gridTemplateRows,isInline,justify,rowGap])}}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function UnconnectedGrid(props,forwardedRef){const gridProps=useGrid(props);return(0,jsx_runtime.jsx)(component.Z,{...gridProps,ref:forwardedRef})}UnconnectedGrid.displayName="UnconnectedGrid";const grid_component=(0,context_connect.Iq)(UnconnectedGrid,"Grid")},"./packages/components/src/heading/component.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>heading_component});var context_connect=__webpack_require__("./packages/components/src/ui/context/context-connect.ts"),component=__webpack_require__("./packages/components/src/view/component.tsx"),use_context_system=__webpack_require__("./packages/components/src/ui/context/use-context-system.js"),hook=__webpack_require__("./packages/components/src/text/hook.js"),font_size=__webpack_require__("./packages/components/src/ui/utils/font-size.ts"),colors_values=__webpack_require__("./packages/components/src/utils/colors-values.js"),config_values=__webpack_require__("./packages/components/src/utils/config-values.js");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function UnconnectedHeading(props,forwardedRef){const headerProps=function useHeading(props){const{as:asProp,level=2,...otherProps}=(0,use_context_system.y)(props,"Heading"),as=asProp||`h${level}`,a11yProps={};return"string"==typeof as&&"h"!==as[0]&&(a11yProps.role="heading",a11yProps["aria-level"]="string"==typeof level?parseInt(level):level),{...(0,hook.Z)({color:colors_values.D.gray[900],size:(0,font_size.gZ)(level),isBlock:!0,weight:config_values.Z.fontWeightHeading,...otherProps}),...a11yProps,as}}(props);return(0,jsx_runtime.jsx)(component.Z,{...headerProps,ref:forwardedRef})}UnconnectedHeading.displayName="UnconnectedHeading";const heading_component=(0,context_connect.Iq)(UnconnectedHeading,"Heading")},"./packages/components/src/menu-group/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_wordpress_element__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function MenuGroup(props){const{children,className="",label,hideSeparator}=props,instanceId=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_2__.Z)(MenuGroup);if(!_wordpress_element__WEBPACK_IMPORTED_MODULE_3__.Children.count(children))return null;const labelId=`components-menu-group-label-${instanceId}`,classNames=classnames__WEBPACK_IMPORTED_MODULE_0___default()(className,"components-menu-group",{"has-hidden-separator":hideSeparator});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:classNames,children:[label&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"components-menu-group__label",id:labelId,"aria-hidden":"true",children:label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{role:"group","aria-labelledby":label?labelId:void 0,children})]})}MenuGroup.displayName="MenuGroup";const __WEBPACK_DEFAULT_EXPORT__=MenuGroup},"./packages/components/src/menu-item/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_shortcut__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/components/src/shortcut/index.tsx"),_button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/src/button/index.tsx"),_icon__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/components/src/icon/index.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function MenuItem(props,ref){let{children,info,className,icon,iconPosition="right",shortcut,isSelected,role="menuitem",suffix,...buttonProps}=props;return className=classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-menu-item__button",className),info&&(children=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("span",{className:"components-menu-item__info-wrapper",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{className:"components-menu-item__item",children}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{className:"components-menu-item__info",children:info})]})),icon&&"string"!=typeof icon&&(icon=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.cloneElement)(icon,{className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-menu-items__item-icon",{"has-icon-right":"right"===iconPosition})})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_button__WEBPACK_IMPORTED_MODULE_3__.ZP,{ref,"aria-checked":"menuitemcheckbox"===role||"menuitemradio"===role?isSelected:void 0,role,icon:"left"===iconPosition?icon:void 0,className,...buttonProps,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{className:"components-menu-item__item",children}),!suffix&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_shortcut__WEBPACK_IMPORTED_MODULE_4__.Z,{className:"components-menu-item__shortcut",shortcut}),!suffix&&icon&&"right"===iconPosition&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_icon__WEBPACK_IMPORTED_MODULE_5__.Z,{icon}),suffix]})}MenuItem.displayName="MenuItem";const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.forwardRef)(MenuItem)},"./packages/components/src/navigable-container/container.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_wordpress_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/dom/build-module/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const noop=()=>{},MENU_ITEM_ROLES=["menuitem","menuitemradio","menuitemcheckbox"];class NavigableContainer extends _wordpress_element__WEBPACK_IMPORTED_MODULE_1__.Component{constructor(args){super(args),this.onKeyDown=this.onKeyDown.bind(this),this.bindContainer=this.bindContainer.bind(this),this.getFocusableContext=this.getFocusableContext.bind(this),this.getFocusableIndex=this.getFocusableIndex.bind(this)}componentDidMount(){this.container&&this.container.addEventListener("keydown",this.onKeyDown)}componentWillUnmount(){this.container&&this.container.removeEventListener("keydown",this.onKeyDown)}bindContainer(ref){const{forwardedRef}=this.props;this.container=ref,"function"==typeof forwardedRef?forwardedRef(ref):forwardedRef&&"current"in forwardedRef&&(forwardedRef.current=ref)}getFocusableContext(target){if(!this.container)return null;const{onlyBrowserTabstops}=this.props,focusables=(onlyBrowserTabstops?_wordpress_dom__WEBPACK_IMPORTED_MODULE_2__.T_.tabbable:_wordpress_dom__WEBPACK_IMPORTED_MODULE_2__.T_.focusable).find(this.container),index=this.getFocusableIndex(focusables,target);return index>-1&&target?{index,target,focusables}:null}getFocusableIndex(focusables,target){return focusables.indexOf(target)}onKeyDown(event){this.props.onKeyDown&&this.props.onKeyDown(event);const{getFocusableContext}=this,{cycle=!0,eventToOffset,onNavigate=noop,stopNavigationEvents}=this.props,offset=eventToOffset(event);if(void 0!==offset&&stopNavigationEvents){event.stopImmediatePropagation();const targetRole=event.target?.getAttribute("role");!!targetRole&&MENU_ITEM_ROLES.includes(targetRole)&&event.preventDefault()}if(!offset)return;const activeElement=event.target?.ownerDocument?.activeElement;if(!activeElement)return;const context=getFocusableContext(activeElement);if(!context)return;const{index,focusables}=context,nextIndex=cycle?function cycleValue(value,total,offset){const nextValue=value+offset;return nextValue<0?total+nextValue:nextValue>=total?nextValue-total:nextValue}(index,focusables.length,offset):index+offset;nextIndex>=0&&nextIndex<focusables.length&&(focusables[nextIndex].focus(),onNavigate(nextIndex,focusables[nextIndex]),"Tab"===event.code&&event.preventDefault())}render(){const{children,stopNavigationEvents,eventToOffset,onNavigate,onKeyDown,cycle,onlyBrowserTabstops,forwardedRef,...restProps}=this.props;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref:this.bindContainer,...restProps,children})}}NavigableContainer.displayName="NavigableContainer";const forwardedNavigableContainer=(props,ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(NavigableContainer,{...props,forwardedRef:ref});forwardedNavigableContainer.displayName="forwardedNavigableContainer",forwardedNavigableContainer.displayName="NavigableContainer";const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(forwardedNavigableContainer)},"./packages/components/src/navigable-container/menu.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ZP:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_container__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/components/src/navigable-container/container.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");function UnforwardedNavigableMenu({role="menu",orientation="vertical",...rest},ref){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_container__WEBPACK_IMPORTED_MODULE_1__.Z,{ref,stopNavigationEvents:!0,onlyBrowserTabstops:!1,role,"aria-orientation":"presentation"===role||"vertical"!==orientation&&"horizontal"!==orientation?void 0:orientation,eventToOffset:evt=>{const{code}=evt;let next=["ArrowDown"],previous=["ArrowUp"];return"horizontal"===orientation&&(next=["ArrowRight"],previous=["ArrowLeft"]),"both"===orientation&&(next=["ArrowRight","ArrowDown"],previous=["ArrowLeft","ArrowUp"]),next.includes(code)?1:previous.includes(code)?-1:["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(code)?0:void 0},...rest})}UnforwardedNavigableMenu.displayName="UnforwardedNavigableMenu";const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.forwardRef)(UnforwardedNavigableMenu)},"./packages/components/src/panel/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>panel});var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function PanelHeader({label,children}){return(0,jsx_runtime.jsxs)("div",{className:"components-panel__header",children:[label&&(0,jsx_runtime.jsx)("h2",{children:label}),children]})}PanelHeader.displayName="PanelHeader";const panel_header=PanelHeader;function UnforwardedPanel({header,className,children},ref){const classNames=classnames_default()(className,"components-panel");return(0,jsx_runtime.jsxs)("div",{className:classNames,ref,children:[header&&(0,jsx_runtime.jsx)(panel_header,{label:header}),children]})}UnforwardedPanel.displayName="UnforwardedPanel";const panel=(0,react.forwardRef)(UnforwardedPanel)},"./packages/components/src/utils/hooks/use-controlled-state.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_values__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/components/src/utils/values.js");const defaultOptions={initial:void 0,fallback:""};const __WEBPACK_DEFAULT_EXPORT__=function useControlledState(currentState,options=defaultOptions){const{initial,fallback}={...defaultOptions,...options},[internalState,setInternalState]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(currentState),hasCurrentState=(0,_values__WEBPACK_IMPORTED_MODULE_1__.Jf)(currentState);return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{hasCurrentState&&internalState&&setInternalState(void 0)}),[hasCurrentState,internalState]),[(0,_values__WEBPACK_IMPORTED_MODULE_1__.Me)([currentState,internalState,initial],fallback),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((nextState=>{hasCurrentState||setInternalState(nextState)}),[hasCurrentState])]}},"./packages/components/src/utils/reduce-motion.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function reduceMotion(prop="transition"){let style;switch(prop){case"transition":style="transition-duration: 0ms;";break;case"animation":style="animation-duration: 1ms;";break;default:style="\n\t\t\t\tanimation-duration: 1ms;\n\t\t\t\ttransition-duration: 0ms;\n\t\t\t"}return`\n\t\t@media ( prefers-reduced-motion: reduce ) {\n\t\t\t${style};\n\t\t}\n\t`}__webpack_require__.d(__webpack_exports__,{r:()=>reduceMotion})},"./packages/icons/build-module/library/check.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"}))},"./packages/icons/build-module/library/menu.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M5 5v1.5h14V5H5zm0 7.8h14v-1.5H5v1.5zM5 19h14v-1.5H5V19z"}))},"./packages/icons/build-module/library/more-vertical.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"}))},"./packages/components/src/tools-panel/stories/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,WithConditionalDefaultControl:()=>WithConditionalDefaultControl,WithConditionallyRenderedControl:()=>WithConditionallyRenderedControl,WithNonToolsPanelItems:()=>WithNonToolsPanelItems,WithOptionalItemsPlusIcon:()=>WithOptionalItemsPlusIcon,WithSlotFillItems:()=>WithSlotFillItems,default:()=>stories});var emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),react=__webpack_require__("./node_modules/react/index.js"),component=__webpack_require__("./packages/components/src/toggle-group-control/toggle-group-control/component.tsx"),toggle_group_control_option_component=__webpack_require__("./packages/components/src/toggle-group-control/toggle-group-control-option/component.tsx"),build_module=__webpack_require__("./packages/a11y/build-module/index.js"),check=__webpack_require__("./packages/icons/build-module/library/check.js"),plus=__webpack_require__("./packages/icons/build-module/library/plus.js"),more_vertical=__webpack_require__("./packages/icons/build-module/library/more-vertical.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),dropdown_menu=__webpack_require__("./packages/components/src/dropdown-menu/index.tsx"),menu_group=__webpack_require__("./packages/components/src/menu-group/index.tsx"),menu_item=__webpack_require__("./packages/components/src/menu-item/index.tsx"),h_stack_component=__webpack_require__("./packages/components/src/h-stack/component.tsx"),heading_component=__webpack_require__("./packages/components/src/heading/component.tsx"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),base_control_styles=__webpack_require__("./packages/components/src/base-control/styles/base-control-styles.ts"),input_control_styles=__webpack_require__("./packages/components/src/input-control/styles/input-control-styles.tsx"),config_values=__webpack_require__("./packages/components/src/utils/config-values.js"),colors_values=__webpack_require__("./packages/components/src/utils/colors-values.js"),rtl=__webpack_require__("./packages/components/src/utils/rtl.js"),space=__webpack_require__("./packages/components/src/ui/utils/space.ts");const toolsPanelGrid={columns:columns=>(0,emotion_react_browser_esm.iv)("grid-template-columns:",`repeat( ${columns}, minmax(0, 1fr) )`,";",""),spacing:(0,emotion_react_browser_esm.iv)("column-gap:",(0,space.D)(2),";row-gap:",(0,space.D)(4),";",""),item:{fullWidth:{name:"18iuzk9",styles:"grid-column:1/-1"}}},ToolsPanelHiddenInnerWrapper={name:"huufmu",styles:">div:not( :first-of-type ){display:none;}"},ToolsPanelHeader=(0,emotion_react_browser_esm.iv)(toolsPanelGrid.item.fullWidth," gap:",(0,space.D)(2),";.components-dropdown-menu{margin:",(0,space.D)(-1)," 0;line-height:0;}&&&& .components-dropdown-menu__toggle{padding:0;min-width:",(0,space.D)(6),";}",""),ToolsPanelHeading={name:"1pmxm02",styles:"font-size:inherit;font-weight:500;line-height:normal;&&{margin:0;}"},ToolsPanelItem=(0,emotion_react_browser_esm.iv)(toolsPanelGrid.item.fullWidth,"&>div,&>fieldset{padding-bottom:0;margin-bottom:0;max-width:100%;}&& ",base_control_styles.im,"{margin-bottom:0;",base_control_styles.ob,":last-child{margin-bottom:0;}}",base_control_styles.vB,"{margin-bottom:0;}&& ",input_control_styles.ub,"{label{line-height:1.4em;}}",""),ToolsPanelItemPlaceholder={name:"eivff4",styles:"display:none"},DropdownMenu={name:"16gsvie",styles:"min-width:200px"},ResetLabel=(0,emotion_styled_base_browser_esm.Z)("span",{target:"ews648u0"})("color:",colors_values.D.ui.themeDark10,";font-size:11px;font-weight:500;line-height:1.4;",(0,rtl.b)({marginLeft:(0,space.D)(3)})," text-transform:uppercase;"),DefaultControlsItem=(0,emotion_react_browser_esm.iv)("color:",colors_values.D.gray[900],";&&[aria-disabled='true']{color:",colors_values.D.gray[700],";opacity:1;&:hover{color:",colors_values.D.gray[700],";}",ResetLabel,"{opacity:0.3;}}",""),noop=()=>{},ToolsPanelContext=(0,react.createContext)({menuItems:{default:{},optional:{}},hasMenuItems:!1,isResetting:!1,shouldRenderPlaceholderItems:!1,registerPanelItem:noop,deregisterPanelItem:noop,flagItemCustomization:noop,registerResetAllFilter:noop,deregisterResetAllFilter:noop,areAllOptionalControlsHidden:!0}),useToolsPanelContext=()=>(0,react.useContext)(ToolsPanelContext);var use_context_system=__webpack_require__("./packages/components/src/ui/context/use-context-system.js"),use_cx=__webpack_require__("./packages/components/src/utils/hooks/use-cx.ts");var context_connect=__webpack_require__("./packages/components/src/ui/context/context-connect.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const DefaultControlsGroup=({itemClassName,items,toggleItem})=>{if(!items.length)return null;const resetSuffix=(0,jsx_runtime.jsx)(ResetLabel,{"aria-hidden":!0,children:(0,i18n_build_module.__)("Reset")});return(0,jsx_runtime.jsx)(menu_group.Z,{label:(0,i18n_build_module.__)("Defaults"),children:items.map((([label,hasValue])=>hasValue?(0,jsx_runtime.jsx)(menu_item.Z,{className:itemClassName,role:"menuitem",label:(0,i18n_build_module.gB)((0,i18n_build_module.__)("Reset %s"),label),onClick:()=>{toggleItem(label),(0,build_module.D)((0,i18n_build_module.gB)((0,i18n_build_module.__)("%s reset to default"),label),"assertive")},suffix:resetSuffix,children:label},label):(0,jsx_runtime.jsx)(menu_item.Z,{className:itemClassName,role:"menuitemcheckbox",isSelected:!0,"aria-disabled":!0,children:label},label)))})};DefaultControlsGroup.displayName="DefaultControlsGroup";const OptionalControlsGroup=({items,toggleItem})=>items.length?(0,jsx_runtime.jsx)(menu_group.Z,{label:(0,i18n_build_module.__)("Tools"),children:items.map((([label,isSelected])=>{const itemLabel=isSelected?(0,i18n_build_module.gB)((0,i18n_build_module.__)("Hide and reset %s"),label):(0,i18n_build_module.gB)((0,i18n_build_module.__)("Show %s"),label);return(0,jsx_runtime.jsx)(menu_item.Z,{icon:isSelected?check.Z:null,isSelected,label:itemLabel,onClick:()=>{isSelected?(0,build_module.D)((0,i18n_build_module.gB)((0,i18n_build_module.__)("%s hidden and reset to default"),label),"assertive"):(0,build_module.D)((0,i18n_build_module.gB)((0,i18n_build_module.__)("%s is now visible"),label),"assertive"),toggleItem(label)},role:"menuitemcheckbox",children:label},label)}))}):null;OptionalControlsGroup.displayName="OptionalControlsGroup";const component_ToolsPanelHeader=(props,forwardedRef)=>{const{areAllOptionalControlsHidden,defaultControlsItemClassName,dropdownMenuClassName,hasMenuItems,headingClassName,headingLevel=2,label:labelText,menuItems,resetAll,toggleItem,...headerProps}=function useToolsPanelHeader(props){const{className,headingLevel=2,...otherProps}=(0,use_context_system.y)(props,"ToolsPanelHeader"),cx=(0,use_cx.I)(),classes=(0,react.useMemo)((()=>cx(ToolsPanelHeader,className)),[className,cx]),dropdownMenuClassName=(0,react.useMemo)((()=>cx(DropdownMenu)),[cx]),headingClassName=(0,react.useMemo)((()=>cx(ToolsPanelHeading)),[cx]),defaultControlsItemClassName=(0,react.useMemo)((()=>cx(DefaultControlsItem)),[cx]),{menuItems,hasMenuItems,areAllOptionalControlsHidden}=useToolsPanelContext();return{...otherProps,areAllOptionalControlsHidden,defaultControlsItemClassName,dropdownMenuClassName,hasMenuItems,headingClassName,headingLevel,menuItems,className:classes}}(props);if(!labelText)return null;const defaultItems=Object.entries(menuItems?.default||{}),optionalItems=Object.entries(menuItems?.optional||{}),dropDownMenuIcon=areAllOptionalControlsHidden?plus.Z:more_vertical.Z,dropDownMenuLabelText=(0,i18n_build_module.gB)((0,i18n_build_module._x)("%s options","Button label to reveal tool panel options"),labelText),dropdownMenuDescriptionText=areAllOptionalControlsHidden?(0,i18n_build_module.__)("All options are currently hidden"):void 0,canResetAll=[...defaultItems,...optionalItems].some((([,isSelected])=>isSelected));return(0,jsx_runtime.jsxs)(h_stack_component.Z,{...headerProps,ref:forwardedRef,children:[(0,jsx_runtime.jsx)(heading_component.Z,{level:headingLevel,className:headingClassName,children:labelText}),hasMenuItems&&(0,jsx_runtime.jsx)(dropdown_menu.Z,{icon:dropDownMenuIcon,label:dropDownMenuLabelText,menuProps:{className:dropdownMenuClassName},toggleProps:{isSmall:!0,describedBy:dropdownMenuDescriptionText},children:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DefaultControlsGroup,{items:defaultItems,toggleItem,itemClassName:defaultControlsItemClassName}),(0,jsx_runtime.jsx)(OptionalControlsGroup,{items:optionalItems,toggleItem}),(0,jsx_runtime.jsx)(menu_group.Z,{children:(0,jsx_runtime.jsx)(menu_item.Z,{"aria-disabled":!canResetAll,variant:"tertiary",onClick:()=>{canResetAll&&(resetAll(),(0,build_module.D)((0,i18n_build_module.__)("All options reset"),"assertive"))},children:(0,i18n_build_module.__)("Reset all")})})]})})]})};component_ToolsPanelHeader.displayName="ToolsPanelHeader";const tools_panel_header_component=(0,context_connect.Iq)(component_ToolsPanelHeader,"ToolsPanelHeader"),generateMenuItems=({panelItems,shouldReset,currentMenuItems,menuItemOrder})=>{const newMenuItems={default:{},optional:{}},menuItems={default:{},optional:{}};return panelItems.forEach((({hasValue,isShownByDefault,label})=>{const group=isShownByDefault?"default":"optional",existingItemValue=currentMenuItems?.[group]?.[label],value=existingItemValue||hasValue();newMenuItems[group][label]=!shouldReset&&value})),menuItemOrder.forEach((key=>{newMenuItems.default.hasOwnProperty(key)&&(menuItems.default[key]=newMenuItems.default[key]),newMenuItems.optional.hasOwnProperty(key)&&(menuItems.optional[key]=newMenuItems.optional[key])})),Object.keys(newMenuItems.default).forEach((key=>{menuItems.default.hasOwnProperty(key)||(menuItems.default[key]=newMenuItems.default[key])})),Object.keys(newMenuItems.optional).forEach((key=>{menuItems.optional.hasOwnProperty(key)||(menuItems.optional[key]=newMenuItems.optional[key])})),menuItems},isMenuItemTypeEmpty=obj=>obj&&0===Object.keys(obj).length;function useToolsPanel(props){const{className,headingLevel=2,resetAll,panelId,hasInnerWrapper=!1,shouldRenderPlaceholderItems=!1,__experimentalFirstVisibleItemClass,__experimentalLastVisibleItemClass,...otherProps}=(0,use_context_system.y)(props,"ToolsPanel"),isResetting=(0,react.useRef)(!1),wasResetting=isResetting.current;(0,react.useEffect)((()=>{wasResetting&&(isResetting.current=!1)}),[wasResetting]);const[panelItems,setPanelItems]=(0,react.useState)([]),[menuItemOrder,setMenuItemOrder]=(0,react.useState)([]),[resetAllFilters,setResetAllFilters]=(0,react.useState)([]),registerPanelItem=(0,react.useCallback)((item=>{setPanelItems((items=>{const newItems=[...items],existingIndex=newItems.findIndex((oldItem=>oldItem.label===item.label));return-1!==existingIndex&&newItems.splice(existingIndex,1),[...newItems,item]})),setMenuItemOrder((items=>items.includes(item.label)?items:[...items,item.label]))}),[setPanelItems,setMenuItemOrder]),deregisterPanelItem=(0,react.useCallback)((label=>{setPanelItems((items=>{const newItems=[...items],index=newItems.findIndex((item=>item.label===label));return-1!==index&&newItems.splice(index,1),newItems}))}),[setPanelItems]),registerResetAllFilter=(0,react.useCallback)((newFilter=>{setResetAllFilters((filters=>[...filters,newFilter]))}),[setResetAllFilters]),deregisterResetAllFilter=(0,react.useCallback)((filterToRemove=>{setResetAllFilters((filters=>filters.filter((filter=>filter!==filterToRemove))))}),[setResetAllFilters]),[menuItems,setMenuItems]=(0,react.useState)({default:{},optional:{}});(0,react.useEffect)((()=>{setMenuItems((prevState=>generateMenuItems({panelItems,shouldReset:!1,currentMenuItems:prevState,menuItemOrder})))}),[panelItems,setMenuItems,menuItemOrder]);const flagItemCustomization=(0,react.useCallback)(((label,group="default")=>{setMenuItems((items=>({...items,[group]:{...items[group],[label]:!0}})))}),[setMenuItems]),[areAllOptionalControlsHidden,setAreAllOptionalControlsHidden]=(0,react.useState)(!1);(0,react.useEffect)((()=>{if(isMenuItemTypeEmpty(menuItems?.default)&&!isMenuItemTypeEmpty(menuItems?.optional)){const allControlsHidden=!Object.entries(menuItems.optional).some((([,isSelected])=>isSelected));setAreAllOptionalControlsHidden(allControlsHidden)}}),[menuItems,setAreAllOptionalControlsHidden]);const cx=(0,use_cx.I)(),classes=(0,react.useMemo)((()=>{const wrapperStyle=hasInnerWrapper&&(columns=2,(0,emotion_react_browser_esm.iv)(">div:not( :first-of-type ){display:grid;",toolsPanelGrid.columns(columns)," ",toolsPanelGrid.spacing," ",toolsPanelGrid.item.fullWidth,";}",""));var columns;const emptyStyle=isMenuItemTypeEmpty(menuItems?.default)&&areAllOptionalControlsHidden&&ToolsPanelHiddenInnerWrapper;return cx((columns=>(0,emotion_react_browser_esm.iv)(toolsPanelGrid.columns(columns)," ",toolsPanelGrid.spacing," border-top:",config_values.Z.borderWidth," solid ",colors_values.D.gray[300],";margin-top:-1px;padding:",(0,space.D)(4),";",""))(2),wrapperStyle,emptyStyle,className)}),[areAllOptionalControlsHidden,className,cx,hasInnerWrapper,menuItems]),toggleItem=(0,react.useCallback)((label=>{const currentItem=panelItems.find((item=>item.label===label));if(!currentItem)return;const menuGroup=currentItem.isShownByDefault?"default":"optional",newMenuItems={...menuItems,[menuGroup]:{...menuItems[menuGroup],[label]:!menuItems[menuGroup][label]}};setMenuItems(newMenuItems)}),[menuItems,panelItems,setMenuItems]),resetAllItems=(0,react.useCallback)((()=>{"function"==typeof resetAll&&(isResetting.current=!0,resetAll(resetAllFilters));const resetMenuItems=generateMenuItems({panelItems,menuItemOrder,shouldReset:!0});setMenuItems(resetMenuItems)}),[panelItems,resetAllFilters,resetAll,setMenuItems,menuItemOrder]),getFirstVisibleItemLabel=items=>{const optionalItems=menuItems.optional||{},firstItem=items.find((item=>item.isShownByDefault||!!optionalItems[item.label]));return firstItem?.label},firstDisplayedItem=getFirstVisibleItemLabel(panelItems),lastDisplayedItem=getFirstVisibleItemLabel([...panelItems].reverse());return{...otherProps,headingLevel,panelContext:(0,react.useMemo)((()=>({areAllOptionalControlsHidden,deregisterPanelItem,deregisterResetAllFilter,firstDisplayedItem,flagItemCustomization,hasMenuItems:!!panelItems.length,isResetting:isResetting.current,lastDisplayedItem,menuItems,panelId,registerPanelItem,registerResetAllFilter,shouldRenderPlaceholderItems,__experimentalFirstVisibleItemClass,__experimentalLastVisibleItemClass})),[areAllOptionalControlsHidden,deregisterPanelItem,deregisterResetAllFilter,firstDisplayedItem,flagItemCustomization,lastDisplayedItem,menuItems,panelId,panelItems,registerResetAllFilter,registerPanelItem,shouldRenderPlaceholderItems,__experimentalFirstVisibleItemClass,__experimentalLastVisibleItemClass]),resetAllItems,toggleItem,className:classes}}var grid_component=__webpack_require__("./packages/components/src/grid/component.tsx");const UnconnectedToolsPanel=(props,forwardedRef)=>{const{children,label,panelContext,resetAllItems,toggleItem,headingLevel,...toolsPanelProps}=useToolsPanel(props);return(0,jsx_runtime.jsx)(grid_component.Z,{...toolsPanelProps,columns:2,ref:forwardedRef,children:(0,jsx_runtime.jsxs)(ToolsPanelContext.Provider,{value:panelContext,children:[(0,jsx_runtime.jsx)(tools_panel_header_component,{label,resetAll:resetAllItems,toggleItem,headingLevel}),children]})})};UnconnectedToolsPanel.displayName="UnconnectedToolsPanel";const tools_panel_component=(0,context_connect.Iq)(UnconnectedToolsPanel,"ToolsPanel");var use_previous=__webpack_require__("./packages/compose/build-module/hooks/use-previous/index.js");const hook_noop=()=>{};var view_component=__webpack_require__("./packages/components/src/view/component.tsx");const UnconnectedToolsPanelItem=(props,forwardedRef)=>{const{children,isShown,shouldRenderPlaceholder,...toolsPanelItemProps}=function useToolsPanelItem(props){const{className,hasValue,isShownByDefault=!1,label,panelId,resetAllFilter=hook_noop,onDeselect,onSelect,...otherProps}=(0,use_context_system.y)(props,"ToolsPanelItem"),{panelId:currentPanelId,menuItems,registerResetAllFilter,deregisterResetAllFilter,registerPanelItem,deregisterPanelItem,flagItemCustomization,isResetting,shouldRenderPlaceholderItems:shouldRenderPlaceholder,firstDisplayedItem,lastDisplayedItem,__experimentalFirstVisibleItemClass,__experimentalLastVisibleItemClass}=useToolsPanelContext(),hasValueCallback=(0,react.useCallback)(hasValue,[panelId,hasValue]),resetAllFilterCallback=(0,react.useCallback)(resetAllFilter,[panelId,resetAllFilter]),previousPanelId=(0,use_previous.Z)(currentPanelId),hasMatchingPanel=currentPanelId===panelId||null===currentPanelId;(0,react.useEffect)((()=>(hasMatchingPanel&&null!==previousPanelId&&registerPanelItem({hasValue:hasValueCallback,isShownByDefault,label,panelId}),()=>{(null===previousPanelId&&currentPanelId||currentPanelId===panelId)&&deregisterPanelItem(label)})),[currentPanelId,hasMatchingPanel,isShownByDefault,label,hasValueCallback,panelId,previousPanelId,registerPanelItem,deregisterPanelItem]),(0,react.useEffect)((()=>(hasMatchingPanel&&registerResetAllFilter(resetAllFilterCallback),()=>{hasMatchingPanel&&deregisterResetAllFilter(resetAllFilterCallback)})),[registerResetAllFilter,deregisterResetAllFilter,resetAllFilterCallback,hasMatchingPanel]);const menuGroup=isShownByDefault?"default":"optional",isMenuItemChecked=menuItems?.[menuGroup]?.[label],wasMenuItemChecked=(0,use_previous.Z)(isMenuItemChecked),isRegistered=void 0!==menuItems?.[menuGroup]?.[label],isValueSet=hasValue(),wasValueSet=(0,use_previous.Z)(isValueSet),newValueSet=isValueSet&&!wasValueSet;(0,react.useEffect)((()=>{newValueSet&&(isShownByDefault||null===currentPanelId)&&flagItemCustomization(label,menuGroup)}),[currentPanelId,newValueSet,isShownByDefault,menuGroup,label,flagItemCustomization]),(0,react.useEffect)((()=>{isRegistered&&!isResetting&&hasMatchingPanel&&(!isMenuItemChecked||isValueSet||wasMenuItemChecked||onSelect?.(),!isMenuItemChecked&&wasMenuItemChecked&&onDeselect?.())}),[hasMatchingPanel,isMenuItemChecked,isRegistered,isResetting,isValueSet,wasMenuItemChecked,onSelect,onDeselect]);const isShown=isShownByDefault?void 0!==menuItems?.[menuGroup]?.[label]:isMenuItemChecked,cx=(0,use_cx.I)(),classes=(0,react.useMemo)((()=>cx(ToolsPanelItem,shouldRenderPlaceholder&&!isShown&&ToolsPanelItemPlaceholder,className,firstDisplayedItem===label&&__experimentalFirstVisibleItemClass,lastDisplayedItem===label&&__experimentalLastVisibleItemClass)),[isShown,shouldRenderPlaceholder,className,cx,firstDisplayedItem,lastDisplayedItem,__experimentalFirstVisibleItemClass,__experimentalLastVisibleItemClass,label]);return{...otherProps,isShown,shouldRenderPlaceholder,className:classes}}(props);return isShown?(0,jsx_runtime.jsx)(view_component.Z,{...toolsPanelItemProps,ref:forwardedRef,children}):shouldRenderPlaceholder?(0,jsx_runtime.jsx)(view_component.Z,{...toolsPanelItemProps,ref:forwardedRef}):null};UnconnectedToolsPanelItem.displayName="UnconnectedToolsPanelItem";const tools_panel_item_component=(0,context_connect.Iq)(UnconnectedToolsPanelItem,"ToolsPanelItem");var panel=__webpack_require__("./packages/components/src/panel/index.tsx"),unit_control=__webpack_require__("./packages/components/src/unit-control/index.tsx"),slot_fill=__webpack_require__("./packages/components/src/slot-fill/index.js");const stories={title:"Components (Experimental)/ToolsPanel",component:tools_panel_component,subcomponents:{ToolsPanelItem:tools_panel_item_component},argTypes:{as:{control:{type:null}},children:{control:{type:null}},panelId:{control:{type:null}},resetAll:{action:"resetAll"}},parameters:{sourceLink:"packages/components/src/tools-panel",actions:{argTypesRegex:"^on.*"},controls:{expanded:!0},docs:{source:{state:"open"}}}},Default=({resetAll:resetAllProp,...props})=>{const[height,setHeight]=(0,react.useState)(),[minHeight,setMinHeight]=(0,react.useState)(),[width,setWidth]=(0,react.useState)(),[scale,setScale]=(0,react.useState)();return(0,jsx_runtime.jsx)(PanelWrapperView,{children:(0,jsx_runtime.jsx)(panel.Z,{children:(0,jsx_runtime.jsxs)(tools_panel_component,{...props,resetAll:filters=>{setHeight(void 0),setWidth(void 0),setMinHeight(void 0),setScale(void 0),resetAllProp(filters)},children:[(0,jsx_runtime.jsx)(SingleColumnItem,{hasValue:()=>!!width,label:"Width",onDeselect:()=>setWidth(void 0),isShownByDefault:!0,children:(0,jsx_runtime.jsx)(unit_control.ZP,{label:"Width",value:width,onChange:next=>setWidth(next)})}),(0,jsx_runtime.jsx)(SingleColumnItem,{hasValue:()=>!!height,label:"Height",onDeselect:()=>setHeight(void 0),isShownByDefault:!0,children:(0,jsx_runtime.jsx)(unit_control.ZP,{label:"Height",value:height,onChange:next=>setHeight(next)})}),(0,jsx_runtime.jsx)(tools_panel_item_component,{hasValue:()=>!!minHeight,label:"Minimum height",onDeselect:()=>setMinHeight(void 0),isShownByDefault:!0,children:(0,jsx_runtime.jsx)(unit_control.ZP,{label:"Minimum height",value:minHeight,onChange:next=>setMinHeight(next)})}),(0,jsx_runtime.jsx)(tools_panel_item_component,{hasValue:()=>!!scale,label:"Scale",onDeselect:()=>setScale(void 0),children:(0,jsx_runtime.jsxs)(component.Z,{__nextHasNoMarginBottom:!0,label:"Scale",value:scale,onChange:next=>setScale(next),isBlock:!0,children:[(0,jsx_runtime.jsx)(toggle_group_control_option_component.Z,{value:"cover",label:"Cover"}),(0,jsx_runtime.jsx)(toggle_group_control_option_component.Z,{value:"contain",label:"Contain"}),(0,jsx_runtime.jsx)(toggle_group_control_option_component.Z,{value:"fill",label:"Fill"})]})})]})})})};Default.displayName="Default",Default.args={label:"Tools Panel (default example)"};const WithNonToolsPanelItems=({resetAll:resetAllProp,...props})=>{const[height,setHeight]=(0,react.useState)(),[width,setWidth]=(0,react.useState)();return(0,jsx_runtime.jsx)(PanelWrapperView,{children:(0,jsx_runtime.jsx)(panel.Z,{children:(0,jsx_runtime.jsxs)(tools_panel_component,{...props,resetAll:filters=>{setHeight(void 0),setWidth(void 0),resetAllProp(filters)},children:[(0,jsx_runtime.jsx)(IntroText,{children:"This text illustrates not all items must be wrapped in a ToolsPanelItem and represented in the panel menu."}),(0,jsx_runtime.jsx)(SingleColumnItem,{hasValue:()=>!!width,label:"Width",onDeselect:()=>setWidth(void 0),isShownByDefault:!0,children:(0,jsx_runtime.jsx)(unit_control.ZP,{label:"Width",value:width,onChange:next=>setWidth(next)})}),(0,jsx_runtime.jsx)(SingleColumnItem,{hasValue:()=>!!height,label:"Height",onDeselect:()=>setHeight(void 0),isShownByDefault:!0,children:(0,jsx_runtime.jsx)(unit_control.ZP,{label:"Height",value:height,onChange:next=>setHeight(next)})})]})})})};WithNonToolsPanelItems.displayName="WithNonToolsPanelItems",WithNonToolsPanelItems.args={...Default.args,label:"ToolsPanel (with non-menu items)"};const WithOptionalItemsPlusIcon=({resetAll:resetAllProp,...props})=>{const[isFirstToolsPanelItemShownByDefault,setIsFirstToolsPanelItemShownByDefault]=(0,react.useState)(!1),[height,setHeight]=(0,react.useState)(),[width,setWidth]=(0,react.useState)(),[minWidth,setMinWidth]=(0,react.useState)();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PanelWrapperView,{children:(0,jsx_runtime.jsx)(panel.Z,{children:(0,react.createElement)(tools_panel_component,{...props,resetAll:filters=>{setHeight(void 0),setWidth(void 0),setMinWidth(void 0),resetAllProp(filters)},key:isFirstToolsPanelItemShownByDefault?"true":"false"},(0,jsx_runtime.jsx)(SingleColumnItem,{hasValue:()=>!!minWidth,label:"Minimum width",onDeselect:()=>setMinWidth(void 0),isShownByDefault:isFirstToolsPanelItemShownByDefault,children:(0,jsx_runtime.jsx)(unit_control.ZP,{label:"Minimum width",value:minWidth,onChange:next=>setMinWidth(next)})}),(0,jsx_runtime.jsx)(SingleColumnItem,{hasValue:()=>!!width,label:"Width",onDeselect:()=>setWidth(void 0),isShownByDefault:!1,children:(0,jsx_runtime.jsx)(unit_control.ZP,{label:"Width",value:width,onChange:next=>setWidth(next)})}),(0,jsx_runtime.jsx)(SingleColumnItem,{hasValue:()=>!!height,label:"Height",onDeselect:()=>setHeight(void 0),isShownByDefault:!1,children:(0,jsx_runtime.jsx)(unit_control.ZP,{label:"Height",value:height,onChange:next=>setHeight(next)})}))})}),(0,jsx_runtime.jsx)("button",{onClick:()=>setIsFirstToolsPanelItemShownByDefault(!isFirstToolsPanelItemShownByDefault),"aria-pressed":isFirstToolsPanelItemShownByDefault?"true":"false",style:{marginTop:"2rem"},children:isFirstToolsPanelItemShownByDefault?"Make first PanelItem hidden by default":"Make first PanelItem shown by default"})]})};WithOptionalItemsPlusIcon.args={...Default.args,label:"Tools Panel (optional items only)"};const{Fill:ToolsPanelItems,Slot}=(0,slot_fill.up)("ToolsPanelSlot"),WithSlotFillItems=({resetAll:resetAllProp,panelId,...props})=>{const[attributes,setAttributes]=(0,react.useState)({}),{width,height}=attributes,updateAttribute=(name,value)=>{setAttributes({...attributes,[name]:value})};return(0,jsx_runtime.jsxs)(slot_fill.zt,{children:[(0,jsx_runtime.jsxs)(ToolsPanelItems,{children:[(0,jsx_runtime.jsx)(SingleColumnItem,{hasValue:()=>!!width,label:"Injected Width",onDeselect:()=>updateAttribute("width",void 0),resetAllFilter:()=>({width:void 0}),panelId,children:(0,jsx_runtime.jsx)(unit_control.ZP,{label:"Injected Width",value:width,onChange:next=>updateAttribute("width",next)})}),(0,jsx_runtime.jsx)(SingleColumnItem,{hasValue:()=>!!height,label:"Injected Height",onDeselect:()=>updateAttribute("height",void 0),resetAllFilter:()=>({height:void 0}),panelId,children:(0,jsx_runtime.jsx)(unit_control.ZP,{label:"Injected Height",value:height,onChange:next=>updateAttribute("height",next)})}),(0,jsx_runtime.jsx)(tools_panel_item_component,{hasValue:()=>!0,label:"Item for alternate panel",onDeselect:()=>{},resetAllFilter:()=>{},panelId:"intended-for-another-panel-via-shared-slot",children:(0,jsx_runtime.jsx)("p",{children:"This panel item will not be displayed in the demo as its panelId does not match the panel being rendered."})})]}),(0,jsx_runtime.jsx)(PanelWrapperView,{children:(0,jsx_runtime.jsx)(panel.Z,{children:(0,jsx_runtime.jsx)(tools_panel_component,{...props,resetAll:(resetFilters=[])=>{let newAttributes={};resetFilters.forEach((resetFilter=>{newAttributes={...newAttributes,...resetFilter(newAttributes)}})),setAttributes(newAttributes),resetAllProp(resetFilters)},panelId,children:(0,jsx_runtime.jsx)(Slot,{})})})})]})};WithSlotFillItems.displayName="WithSlotFillItems",WithSlotFillItems.args={...Default.args,label:"Tools Panel With SlotFill Items",panelId:"unique-tools-panel-id"};const WithConditionalDefaultControl=({resetAll:resetAllProp,panelId,...props})=>{const[attributes,setAttributes]=(0,react.useState)({}),{height,scale}=attributes,updateAttribute=(name,value)=>{setAttributes({...attributes,[name]:value})};return(0,jsx_runtime.jsxs)(slot_fill.zt,{children:[(0,jsx_runtime.jsxs)(ToolsPanelItems,{children:[(0,jsx_runtime.jsx)(SingleColumnItem,{hasValue:()=>!!height,label:"Injected Height",onDeselect:()=>updateAttribute("height",void 0),resetAllFilter:()=>({height:void 0}),panelId,isShownByDefault:!0,children:(0,jsx_runtime.jsx)(unit_control.ZP,{label:"Injected Height",value:height,onChange:next=>updateAttribute("height",next)})}),(0,jsx_runtime.jsx)(tools_panel_item_component,{hasValue:()=>!!scale,label:"Scale",onDeselect:()=>updateAttribute("scale",void 0),resetAllFilter:()=>({scale:void 0}),panelId,isShownByDefault:!!height,children:(0,jsx_runtime.jsxs)(component.Z,{__nextHasNoMarginBottom:!0,label:"Scale",value:scale,onChange:next=>updateAttribute("scale",next),isBlock:!0,children:[(0,jsx_runtime.jsx)(toggle_group_control_option_component.Z,{value:"cover",label:"Cover"}),(0,jsx_runtime.jsx)(toggle_group_control_option_component.Z,{value:"contain",label:"Contain"}),(0,jsx_runtime.jsx)(toggle_group_control_option_component.Z,{value:"fill",label:"Fill"})]})})]}),(0,jsx_runtime.jsx)(PanelWrapperView,{children:(0,jsx_runtime.jsx)(panel.Z,{children:(0,jsx_runtime.jsx)(tools_panel_component,{...props,resetAll:(resetFilters=[])=>{let newAttributes={};resetFilters.forEach((resetFilter=>{newAttributes={...newAttributes,...resetFilter(newAttributes)}})),setAttributes(newAttributes),resetAllProp(resetFilters)},panelId,children:(0,jsx_runtime.jsx)(Slot,{})})})})]})};WithConditionalDefaultControl.displayName="WithConditionalDefaultControl",WithConditionalDefaultControl.args={...Default.args,label:"Tools Panel With Conditional Default via SlotFill",panelId:"unique-tools-panel-id"};const WithConditionallyRenderedControl=({resetAll:resetAllProp,panelId,...props})=>{const[attributes,setAttributes]=(0,react.useState)({}),{height,scale}=attributes,updateAttribute=(name,value)=>{setAttributes({...attributes,[name]:value})};return(0,jsx_runtime.jsxs)(slot_fill.zt,{children:[(0,jsx_runtime.jsxs)(ToolsPanelItems,{children:[(0,jsx_runtime.jsx)(SingleColumnItem,{hasValue:()=>!!height,label:"Injected Height",onDeselect:()=>{updateAttribute("scale",void 0),updateAttribute("height",void 0)},resetAllFilter:()=>({height:void 0}),panelId,isShownByDefault:!0,children:(0,jsx_runtime.jsx)(unit_control.ZP,{label:"Injected Height",value:height,onChange:next=>updateAttribute("height",next)})}),!!height&&(0,jsx_runtime.jsx)(tools_panel_item_component,{hasValue:()=>!!scale,label:"Scale",onDeselect:()=>updateAttribute("scale",void 0),resetAllFilter:()=>({scale:void 0}),panelId,isShownByDefault:!0,children:(0,jsx_runtime.jsxs)(component.Z,{__nextHasNoMarginBottom:!0,label:"Scale",value:scale,onChange:next=>updateAttribute("scale",next),isBlock:!0,children:[(0,jsx_runtime.jsx)(toggle_group_control_option_component.Z,{value:"cover",label:"Cover"}),(0,jsx_runtime.jsx)(toggle_group_control_option_component.Z,{value:"contain",label:"Contain"}),(0,jsx_runtime.jsx)(toggle_group_control_option_component.Z,{value:"fill",label:"Fill"})]})})]}),(0,jsx_runtime.jsx)(PanelWrapperView,{children:(0,jsx_runtime.jsx)(panel.Z,{children:(0,jsx_runtime.jsx)(tools_panel_component,{...props,resetAll:(resetFilters=[])=>{let newAttributes={};resetFilters.forEach((resetFilter=>{newAttributes={...newAttributes,...resetFilter(newAttributes)}})),setAttributes(newAttributes),resetAllProp(resetFilters)},panelId,children:(0,jsx_runtime.jsx)(Slot,{})})})})]})};WithConditionallyRenderedControl.displayName="WithConditionallyRenderedControl",WithConditionallyRenderedControl.args={...Default.args,label:"Tools Panel With Conditionally Rendered Item via SlotFill",panelId:"unique-tools-panel-id"};const PanelWrapperView=(0,emotion_styled_base_browser_esm.Z)("div",{target:"etfbuca2"})({name:"1gwq18j",styles:"font-size:13px;.components-dropdown-menu__menu{max-width:220px;}"}),SingleColumnItem=(0,emotion_styled_base_browser_esm.Z)(tools_panel_item_component,{target:"etfbuca1"})({name:"957xgf",styles:"grid-column:span 1"}),IntroText=(0,emotion_styled_base_browser_esm.Z)("div",{target:"etfbuca0"})({name:"1kmi7xh",styles:"grid-column:span 2"})}}]);