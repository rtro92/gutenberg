"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[7805],{"./packages/a11y/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>speak});var build_module=__webpack_require__("./packages/i18n/build-module/index.js");function addContainer(ariaLive="polite"){const container=document.createElement("div");container.id=`a11y-speak-${ariaLive}`,container.className="a11y-speak-region",container.setAttribute("style","position: absolute;margin: -1px;padding: 0;height: 1px;width: 1px;overflow: hidden;clip: rect(1px, 1px, 1px, 1px);-webkit-clip-path: inset(50%);clip-path: inset(50%);border: 0;word-wrap: normal !important;"),container.setAttribute("aria-live",ariaLive),container.setAttribute("aria-relevant","additions text"),container.setAttribute("aria-atomic","true");const{body}=document;return body&&body.appendChild(container),container}let previousMessage="";function speak(message,ariaLive){!function clear(){const regions=document.getElementsByClassName("a11y-speak-region"),introText=document.getElementById("a11y-speak-intro-text");for(let i=0;i<regions.length;i++)regions[i].textContent="";introText&&introText.setAttribute("hidden","hidden")}(),message=function filterMessage(message){return message=message.replace(/<[^<>]+>/g," "),previousMessage===message&&(message+=" "),previousMessage=message,message}(message);const introText=document.getElementById("a11y-speak-intro-text"),containerAssertive=document.getElementById("a11y-speak-assertive"),containerPolite=document.getElementById("a11y-speak-polite");containerAssertive&&"assertive"===ariaLive?containerAssertive.textContent=message:containerPolite&&(containerPolite.textContent=message),introText&&introText.removeAttribute("hidden")}!function domReady(callback){"undefined"!=typeof document&&("complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",callback):callback())}((function setup(){const introText=document.getElementById("a11y-speak-intro-text"),containerAssertive=document.getElementById("a11y-speak-assertive"),containerPolite=document.getElementById("a11y-speak-polite");null===introText&&function addIntroText(){const introText=document.createElement("p");introText.id="a11y-speak-intro-text",introText.className="a11y-speak-intro-text",introText.textContent=(0,build_module.__)("Notifications"),introText.setAttribute("style","position: absolute;margin: -1px;padding: 0;height: 1px;width: 1px;overflow: hidden;clip: rect(1px, 1px, 1px, 1px);-webkit-clip-path: inset(50%);clip-path: inset(50%);border: 0;word-wrap: normal !important;"),introText.setAttribute("hidden","hidden");const{body}=document;return body&&body.appendChild(introText),introText}(),null===containerAssertive&&addContainer("assertive"),null===containerPolite&&addContainer("polite")}))},"./packages/components/src/base-control/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Xp:()=>BaseControl,ZP:()=>__WEBPACK_DEFAULT_EXPORT__});var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_visually_hidden__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/src/visually-hidden/component.tsx"),_styles_base_control_styles__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/src/base-control/styles/base-control-styles.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const BaseControl=({__nextHasNoMarginBottom=!1,id,label,hideLabelFromVision=!1,help,className,children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_styles_base_control_styles__WEBPACK_IMPORTED_MODULE_2__.im,{className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-base-control",className),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_styles_base_control_styles__WEBPACK_IMPORTED_MODULE_2__.ob,{className:"components-base-control__field",__nextHasNoMarginBottom,children:[label&&id&&(hideLabelFromVision?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_visually_hidden__WEBPACK_IMPORTED_MODULE_3__.Z,{as:"label",htmlFor:id,children:label}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_styles_base_control_styles__WEBPACK_IMPORTED_MODULE_2__.ar,{className:"components-base-control__label",htmlFor:id,children:label})),label&&!id&&(hideLabelFromVision?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_visually_hidden__WEBPACK_IMPORTED_MODULE_3__.Z,{as:"label",children:label}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(BaseControl.VisualLabel,{children:label})),children]}),!!help&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_styles_base_control_styles__WEBPACK_IMPORTED_MODULE_2__.vB,{id:id?id+"__help":void 0,className:"components-base-control__help",__nextHasNoMarginBottom,children:help})]});BaseControl.displayName="BaseControl";const VisualLabel=({className,children,...props})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_styles_base_control_styles__WEBPACK_IMPORTED_MODULE_2__.yF,{...props,className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-base-control__label",className),children});VisualLabel.displayName="VisualLabel",BaseControl.VisualLabel=VisualLabel;const __WEBPACK_DEFAULT_EXPORT__=BaseControl},"./packages/components/src/flex/flex-block/component.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>flex_block_component});var context_connect=__webpack_require__("./packages/components/src/ui/context/context-connect.ts"),component=__webpack_require__("./packages/components/src/view/component.tsx"),use_context_system=__webpack_require__("./packages/components/src/ui/context/use-context-system.js"),hook=__webpack_require__("./packages/components/src/flex/flex-item/hook.ts");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function UnconnectedFlexBlock(props,forwardedRef){const flexBlockProps=function useFlexBlock(props){const otherProps=(0,use_context_system.y)(props,"FlexBlock");return(0,hook.i)({isBlock:!0,...otherProps})}(props);return(0,jsx_runtime.jsx)(component.Z,{...flexBlockProps,ref:forwardedRef})}UnconnectedFlexBlock.displayName="UnconnectedFlexBlock";const flex_block_component=(0,context_connect.Iq)(UnconnectedFlexBlock,"FlexBlock")},"./packages/components/src/flex/flex/component.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _ui_context__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/components/src/ui/context/context-connect.ts"),_hook__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/components/src/flex/flex/hook.ts"),_context__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/src/flex/context.ts"),_view__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/src/view/component.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");function UnconnectedFlex(props,forwardedRef){const{children,isColumn,...otherProps}=(0,_hook__WEBPACK_IMPORTED_MODULE_1__.k)(props);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_context__WEBPACK_IMPORTED_MODULE_2__.G.Provider,{value:{flexItemDisplay:isColumn?"block":void 0},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_view__WEBPACK_IMPORTED_MODULE_3__.Z,{...otherProps,ref:forwardedRef,children})})}UnconnectedFlex.displayName="UnconnectedFlex";const __WEBPACK_DEFAULT_EXPORT__=(0,_ui_context__WEBPACK_IMPORTED_MODULE_4__.Iq)(UnconnectedFlex,"Flex")},"./packages/components/src/form-token-field/suggestions-list.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var dom_scroll_into_view__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/dom-scroll-into-view/lib/index.js"),dom_scroll_into_view__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(dom_scroll_into_view__WEBPACK_IMPORTED_MODULE_0__),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_wordpress_element__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const handleMouseDown=e=>{e.preventDefault()};function SuggestionsList({selectedIndex,scrollIntoView,match,onHover,onSelect,suggestions=[],displayTransform,instanceId,__experimentalRenderItem}){const[scrollingIntoView,setScrollingIntoView]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_3__.useState)(!1),listRef=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_4__.Z)((listNode=>{let rafId;return selectedIndex>-1&&scrollIntoView&&listNode.children[selectedIndex]&&(setScrollingIntoView(!0),dom_scroll_into_view__WEBPACK_IMPORTED_MODULE_0___default()(listNode.children[selectedIndex],listNode,{onlyScrollIfNeeded:!0}),rafId=requestAnimationFrame((()=>{setScrollingIntoView(!1)}))),()=>{void 0!==rafId&&cancelAnimationFrame(rafId)}}),[selectedIndex,scrollIntoView]),handleHover=suggestion=>()=>{scrollingIntoView||onHover?.(suggestion)},handleClick=suggestion=>()=>{onSelect?.(suggestion)};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("ul",{ref:listRef,className:"components-form-token-field__suggestions-list",id:`components-form-token-suggestions-${instanceId}`,role:"listbox",children:suggestions.map(((suggestion,index)=>{const matchText=(suggestion=>{const matchText=displayTransform(match).toLocaleLowerCase();if(0===matchText.length)return null;const transformedSuggestion=displayTransform(suggestion),indexOfMatch=transformedSuggestion.toLocaleLowerCase().indexOf(matchText);return{suggestionBeforeMatch:transformedSuggestion.substring(0,indexOfMatch),suggestionMatch:transformedSuggestion.substring(indexOfMatch,indexOfMatch+matchText.length),suggestionAfterMatch:transformedSuggestion.substring(indexOfMatch+matchText.length)}})(suggestion),className=classnames__WEBPACK_IMPORTED_MODULE_1___default()("components-form-token-field__suggestion",{"is-selected":index===selectedIndex});let output;return output="function"==typeof __experimentalRenderItem?__experimentalRenderItem({item:suggestion}):matchText?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("span",{"aria-label":displayTransform(suggestion),children:[matchText.suggestionBeforeMatch,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("strong",{className:"components-form-token-field__suggestion-match",children:matchText.suggestionMatch}),matchText.suggestionAfterMatch]}):displayTransform(suggestion),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("li",{id:`components-form-token-suggestions-${instanceId}-${index}`,role:"option",className,onMouseDown:handleMouseDown,onClick:handleClick(suggestion),onMouseEnter:handleHover(suggestion),"aria-selected":index===selectedIndex,children:output},"object"==typeof suggestion&&"value"in suggestion?suggestion?.value:displayTransform(suggestion))}))})}SuggestionsList.displayName="SuggestionsList";const __WEBPACK_DEFAULT_EXPORT__=SuggestionsList},"./packages/components/src/form-token-field/token-input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ZP:()=>__WEBPACK_DEFAULT_EXPORT__});var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function UnForwardedTokenInput(props,ref){const{value,isExpanded,instanceId,selectedSuggestionIndex,className,onChange,onFocus,onBlur,...restProps}=props,[hasFocus,setHasFocus]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),size=value?value.length+1:0;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("input",{ref,id:`components-form-token-input-${instanceId}`,type:"text",...restProps,value:value||"",onChange:event=>{onChange&&onChange({value:event.target.value})},onFocus:e=>{setHasFocus(!0),onFocus?.(e)},onBlur:e=>{setHasFocus(!1),onBlur?.(e)},size,className:classnames__WEBPACK_IMPORTED_MODULE_0___default()(className,"components-form-token-field__input"),autoComplete:"off",role:"combobox","aria-expanded":isExpanded,"aria-autocomplete":"list","aria-owns":isExpanded?`components-form-token-suggestions-${instanceId}`:void 0,"aria-activedescendant":hasFocus&&-1!==selectedSuggestionIndex&&isExpanded?`components-form-token-suggestions-${instanceId}-${selectedSuggestionIndex}`:void 0,"aria-describedby":`components-form-token-suggestions-howto-${instanceId}`})}UnForwardedTokenInput.displayName="UnForwardedTokenInput";const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.forwardRef)(UnForwardedTokenInput)},"./packages/components/src/utils/hooks/use-controlled-value.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>useControlledValue});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function useControlledValue({defaultValue,onChange,value:valueProp}){const hasValue=void 0!==valueProp,initialValue=hasValue?valueProp:defaultValue,[state,setState]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(initialValue);let setValue;return setValue=hasValue&&"function"==typeof onChange?onChange:hasValue||"function"!=typeof onChange?setState:nextValue=>{onChange(nextValue),setState(nextValue)},[hasValue?valueProp:state,setValue]}},"./packages/components/src/utils/strings.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>normalizeTextString,h:()=>escapeRegExp});var remove_accents__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/remove-accents/index.js"),remove_accents__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(remove_accents__WEBPACK_IMPORTED_MODULE_0__);const ALL_UNICODE_DASH_CHARACTERS=new RegExp(`[${["-","~","­","֊","־","᐀","᠆","‐","‑","‒","–","—","―","⁓","⁻","₋","−","⸗","⸺","⸻","〜","〰","゠","︱","︲","﹘","﹣","－"].join("")}]`,"g"),normalizeTextString=value=>remove_accents__WEBPACK_IMPORTED_MODULE_0___default()(value).toLocaleLowerCase().replace(ALL_UNICODE_DASH_CHARACTERS,"-");function escapeRegExp(string){return string.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}},"./packages/components/src/utils/use-deprecated-props.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>useDeprecated36pxDefaultSizeProp});var _wordpress_deprecated__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/deprecated/build-module/index.js");function useDeprecated36pxDefaultSizeProp(props,componentIdentifier){const{__next36pxDefaultSize,__next40pxDefaultSize,...otherProps}=props;return void 0!==__next36pxDefaultSize&&(0,_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_0__.Z)("`__next36pxDefaultSize` prop in "+componentIdentifier,{alternative:"`__next40pxDefaultSize`",since:"6.3"}),{...otherProps,__next40pxDefaultSize:null!=__next40pxDefaultSize?__next40pxDefaultSize:__next36pxDefaultSize}}},"./packages/compose/build-module/utils/create-higher-order-component/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>createHigherOrderComponent});var change_case__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/pascal-case/dist.es2015/index.js");function createHigherOrderComponent(mapComponent,modifierName){return Inner=>{const Outer=mapComponent(Inner);return Outer.displayName=hocName(modifierName,Inner),Outer}}const hocName=(name,Inner)=>{const inner=Inner.displayName||Inner.name||"Component";return`${(0,change_case__WEBPACK_IMPORTED_MODULE_0__.Ho)(null!=name?name:"")}(${inner})`}},"./packages/icons/build-module/library/close-small.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"}))},"./packages/components/src/combobox-control/stories/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,WithCustomRenderItem:()=>WithCustomRenderItem,default:()=>stories});var react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js"),close_small=__webpack_require__("./packages/icons/build-module/library/close-small.js"),emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),component=__webpack_require__("./packages/components/src/flex/flex/component.tsx"),space=__webpack_require__("./packages/components/src/ui/utils/space.ts");const deprecatedDefaultSize=({__next40pxDefaultSize})=>!__next40pxDefaultSize&&(0,emotion_react_browser_esm.iv)("height:28px;padding-left:",(0,space.D)(1),";padding-right:",(0,space.D)(1),";",""),InputWrapperFlex=(0,emotion_styled_base_browser_esm.Z)(component.Z,{target:"evuatpg0"})("height:38px;padding-left:",(0,space.D)(2),";padding-right:",(0,space.D)(2),";",deprecatedDefaultSize,";");var token_input=__webpack_require__("./packages/components/src/form-token-field/token-input.tsx"),suggestions_list=__webpack_require__("./packages/components/src/form-token-field/suggestions-list.tsx"),base_control=__webpack_require__("./packages/components/src/base-control/index.tsx"),src_button=__webpack_require__("./packages/components/src/button/index.tsx"),flex_block_component=__webpack_require__("./packages/components/src/flex/flex-block/component.tsx"),flex_item_component=__webpack_require__("./packages/components/src/flex/flex-item/component.tsx"),create_higher_order_component=__webpack_require__("./packages/compose/build-module/utils/create-higher-order-component/index.js"),use_focus_outside=__webpack_require__("./packages/compose/build-module/hooks/use-focus-outside/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const with_focus_outside=(0,create_higher_order_component.o)((WrappedComponent=>props=>{const[handleFocusOutside,setHandleFocusOutside]=(0,react.useState)(),bindFocusOutsideHandler=(0,react.useCallback)((node=>setHandleFocusOutside((()=>node?.handleFocusOutside?node.handleFocusOutside.bind(node):void 0))),[]);return(0,jsx_runtime.jsx)("div",{...(0,use_focus_outside.Z)(handleFocusOutside),children:(0,jsx_runtime.jsx)(WrappedComponent,{ref:bindFocusOutsideHandler,...props})})}),"withFocusOutside");var use_controlled_value=__webpack_require__("./packages/components/src/utils/hooks/use-controlled-value.ts"),strings=__webpack_require__("./packages/components/src/utils/strings.ts"),use_deprecated_props=__webpack_require__("./packages/components/src/utils/use-deprecated-props.ts");const noop=()=>{},DetectOutside=with_focus_outside(class extends react.Component{handleFocusOutside(event){this.props.onFocusOutside(event)}render(){return this.props.children}}),getIndexOfMatchingSuggestion=(selectedSuggestion,matchingSuggestions)=>null===selectedSuggestion?-1:matchingSuggestions.indexOf(selectedSuggestion);function ComboboxControl(props){var _currentOption$label;const{__nextHasNoMarginBottom=!1,__next40pxDefaultSize=!1,value:valueProp,label,options,onChange:onChangeProp,onFilterValueChange=noop,hideLabelFromVision,help,allowReset=!0,className,messages={selected:(0,build_module.__)("Item selected.")},__experimentalRenderItem}=(0,use_deprecated_props.s)(props,"wp.components.ComboboxControl"),[value,setValue]=(0,use_controlled_value.O)({value:valueProp,onChange:onChangeProp}),currentOption=options.find((option=>option.value===value)),currentLabel=null!==(_currentOption$label=currentOption?.label)&&void 0!==_currentOption$label?_currentOption$label:"",instanceId=(0,use_instance_id.Z)(ComboboxControl,"combobox-control"),[selectedSuggestion,setSelectedSuggestion]=(0,react.useState)(currentOption||null),[isExpanded,setIsExpanded]=(0,react.useState)(!1),[inputHasFocus,setInputHasFocus]=(0,react.useState)(!1),[inputValue,setInputValue]=(0,react.useState)(""),inputContainer=(0,react.useRef)(null),matchingSuggestions=(0,react.useMemo)((()=>{const startsWithMatch=[],containsMatch=[],match=(0,strings.e)(inputValue);return options.forEach((option=>{const index=(0,strings.e)(option.label).indexOf(match);0===index?startsWithMatch.push(option):index>0&&containsMatch.push(option)})),startsWithMatch.concat(containsMatch)}),[inputValue,options]),onSuggestionSelected=newSelectedSuggestion=>{setValue(newSelectedSuggestion.value),(0,a11y_build_module.D)(messages.selected,"assertive"),setSelectedSuggestion(newSelectedSuggestion),setInputValue(""),setIsExpanded(!1)},handleArrowNavigation=(offset=1)=>{let nextIndex=getIndexOfMatchingSuggestion(selectedSuggestion,matchingSuggestions)+offset;nextIndex<0?nextIndex=matchingSuggestions.length-1:nextIndex>=matchingSuggestions.length&&(nextIndex=0),setSelectedSuggestion(matchingSuggestions[nextIndex]),setIsExpanded(!0)};return(0,react.useEffect)((()=>{const hasMatchingSuggestions=matchingSuggestions.length>0,hasSelectedMatchingSuggestions=getIndexOfMatchingSuggestion(selectedSuggestion,matchingSuggestions)>0;hasMatchingSuggestions&&!hasSelectedMatchingSuggestions&&setSelectedSuggestion(matchingSuggestions[0])}),[matchingSuggestions,selectedSuggestion]),(0,react.useEffect)((()=>{const hasMatchingSuggestions=matchingSuggestions.length>0;if(isExpanded){const message=hasMatchingSuggestions?(0,build_module.gB)((0,build_module._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",matchingSuggestions.length),matchingSuggestions.length):(0,build_module.__)("No results.");(0,a11y_build_module.D)(message,"polite")}}),[matchingSuggestions,isExpanded]),(0,jsx_runtime.jsx)(DetectOutside,{onFocusOutside:()=>{setIsExpanded(!1)},children:(0,jsx_runtime.jsx)(base_control.ZP,{__nextHasNoMarginBottom,className:classnames_default()(className,"components-combobox-control"),label,id:`components-form-token-input-${instanceId}`,hideLabelFromVision,help,children:(0,jsx_runtime.jsxs)("div",{className:"components-combobox-control__suggestions-container",tabIndex:-1,onKeyDown:event=>{let preventDefault=!1;if(!event.defaultPrevented&&!event.nativeEvent.isComposing&&229!==event.keyCode){switch(event.code){case"Enter":selectedSuggestion&&(onSuggestionSelected(selectedSuggestion),preventDefault=!0);break;case"ArrowUp":handleArrowNavigation(-1),preventDefault=!0;break;case"ArrowDown":handleArrowNavigation(1),preventDefault=!0;break;case"Escape":setIsExpanded(!1),setSelectedSuggestion(null),preventDefault=!0}preventDefault&&event.preventDefault()}},children:[(0,jsx_runtime.jsxs)(InputWrapperFlex,{__next40pxDefaultSize,children:[(0,jsx_runtime.jsx)(flex_block_component.Z,{children:(0,jsx_runtime.jsx)(token_input.ZP,{className:"components-combobox-control__input",instanceId,ref:inputContainer,value:isExpanded?inputValue:currentLabel,onFocus:()=>{setInputHasFocus(!0),setIsExpanded(!0),onFilterValueChange(""),setInputValue("")},onBlur:()=>{setInputHasFocus(!1)},isExpanded,selectedSuggestionIndex:getIndexOfMatchingSuggestion(selectedSuggestion,matchingSuggestions),onChange:event=>{const text=event.value;setInputValue(text),onFilterValueChange(text),inputHasFocus&&setIsExpanded(!0)}})}),allowReset&&(0,jsx_runtime.jsx)(flex_item_component.Z,{children:(0,jsx_runtime.jsx)(src_button.ZP,{className:"components-combobox-control__reset",icon:close_small.Z,disabled:!value,onClick:()=>{setValue(null),inputContainer.current?.focus()},label:(0,build_module.__)("Reset")})})]}),isExpanded&&(0,jsx_runtime.jsx)(suggestions_list.Z,{instanceId,match:{label:inputValue,value:""},displayTransform:suggestion=>suggestion.label,suggestions:matchingSuggestions,selectedIndex:getIndexOfMatchingSuggestion(selectedSuggestion,matchingSuggestions),onHover:setSelectedSuggestion,onSelect:onSuggestionSelected,scrollIntoView:!0,__experimentalRenderItem})]})})})}ComboboxControl.displayName="ComboboxControl";const combobox_control=ComboboxControl;const stories={title:"Components/ComboboxControl",component:combobox_control,argTypes:{value:{control:{type:null}}},parameters:{sourceLink:"packages/components/src/combobox-control",actions:{argTypesRegex:"^on.*"},controls:{expanded:!0},docs:{source:{state:"open"}}}},countryOptions=[{name:"Afghanistan",code:"AF"},{name:"Åland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"}].map((country=>({value:country.code,label:country.name}))),Template=({onChange,...args})=>{const[value,setValue]=(0,react.useState)(null);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(combobox_control,{...args,value,onChange:(...changeArgs)=>{setValue(...changeArgs),onChange?.(...changeArgs)}})})},Default=Template.bind({});Default.args={allowReset:!1,label:"Select a country",options:countryOptions};const WithCustomRenderItem=Template.bind({});WithCustomRenderItem.args={...Default.args,label:"Select an author",options:[{value:"parsley",label:"Parsley Montana",age:48,country:"Germany"},{value:"cabbage",label:"Cabbage New York",age:44,country:"France"},{value:"jake",label:"Jake Weary",age:41,country:"United Kingdom"}],__experimentalRenderItem:({item})=>{const{label,age,country}=item;return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{style:{marginBottom:"0.2rem"},children:label}),(0,jsx_runtime.jsxs)("small",{children:["Age: ",age,", Country: ",country]})]})}},WithCustomRenderItem.parameters??={},WithCustomRenderItem.parameters.docs??={},WithCustomRenderItem.parameters.docs.description??={},WithCustomRenderItem.parameters.docs.description.story??="The rendered output of each suggestion can be customized by passing a\nrender function to the `__experimentalRenderItem` prop. (This is still an experimental feature\nand is subject to change.)"}}]);