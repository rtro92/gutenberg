"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[1167],{"./packages/components/src/select-control/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>SelectControl,Z:()=>__WEBPACK_DEFAULT_EXPORT__});var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_wordpress_compose__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/index.js"),_base_control__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/components/src/base-control/index.tsx"),_input_control_input_base__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/components/src/input-control/input-base.tsx"),_styles_select_control_styles__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/components/src/select-control/styles/select-control-styles.ts"),_chevron_down__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/components/src/select-control/chevron-down.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const noop=()=>{};function UnforwardedSelectControl(props,ref){const{className,disabled=!1,help,hideLabelFromVision,id:idProp,label,multiple=!1,onBlur=noop,onChange,onFocus=noop,options=[],size="default",value:valueProp,labelPosition="top",children,prefix,suffix,__next36pxDefaultSize=!1,__nextHasNoMarginBottom=!1,...restProps}=props,[isFocused,setIsFocused]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_3__.useState)(!1),id=function useUniqueId(idProp){const instanceId=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_2__.Z)(SelectControl);return idProp||`inspector-select-control-${instanceId}`}(idProp),helpId=help?`${id}__help`:void 0;if(!options?.length&&!children)return null;const classes=classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-select-control",className);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_base_control__WEBPACK_IMPORTED_MODULE_4__.ZP,{help,id,__nextHasNoMarginBottom,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_input_control_input_base__WEBPACK_IMPORTED_MODULE_5__.Z,{className:classes,disabled,hideLabelFromVision,id,isFocused,label,size,suffix:suffix||!multiple&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chevron_down__WEBPACK_IMPORTED_MODULE_6__.Z,{}),prefix,labelPosition,__next36pxDefaultSize,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_styles_select_control_styles__WEBPACK_IMPORTED_MODULE_7__.Ph,{...restProps,__next36pxDefaultSize,"aria-describedby":helpId,className:"components-select-control__input",disabled,id,multiple,onBlur:event=>{onBlur(event),setIsFocused(!1)},onChange:event=>{if(props.multiple){const newValues=Array.from(event.target.options).filter((({selected})=>selected)).map((({value})=>value));props.onChange?.(newValues,{event})}else props.onChange?.(event.target.value,{event})},onFocus:event=>{onFocus(event),setIsFocused(!0)},ref,selectSize:size,value:valueProp,children:children||options.map(((option,index)=>{const key=option.id||`${option.label}-${option.value}-${index}`;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("option",{value:option.value,disabled:option.disabled,hidden:option.hidden,children:option.label},key)}))})})})}UnforwardedSelectControl.displayName="UnforwardedSelectControl";const SelectControl=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(UnforwardedSelectControl),__WEBPACK_DEFAULT_EXPORT__=SelectControl},"./packages/components/src/tree-select/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_wordpress_html_entities__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/html-entities/build-module/index.js"),_select_control__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/src/select-control/index.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");function getSelectOptions(tree,level=0){return tree.flatMap((treeNode=>[{value:treeNode.id,label:" ".repeat(3*level)+(0,_wordpress_html_entities__WEBPACK_IMPORTED_MODULE_1__.S)(treeNode.name)},...getSelectOptions(treeNode.children||[],level+1)]))}function TreeSelect({label,noOptionLabel,onChange,selectedId,tree=[],...props}){const options=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useMemo)((()=>[noOptionLabel&&{value:"",label:noOptionLabel},...getSelectOptions(tree)].filter((option=>!!option))),[noOptionLabel,tree]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_select_control__WEBPACK_IMPORTED_MODULE_3__.Y,{label,options,onChange,value:selectedId,...props})}TreeSelect.displayName="TreeSelect";const __WEBPACK_DEFAULT_EXPORT__=TreeSelect},"./packages/components/src/v-stack/component.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>v_stack_component});var context_connect=__webpack_require__("./packages/components/src/ui/context/context-connect.ts"),component=__webpack_require__("./packages/components/src/view/component.tsx"),use_context_system=__webpack_require__("./packages/components/src/ui/context/use-context-system.js"),hook=__webpack_require__("./packages/components/src/h-stack/hook.tsx");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function UnconnectedVStack(props,forwardedRef){const vStackProps=function useVStack(props){const{expanded=!1,alignment="stretch",...otherProps}=(0,use_context_system.y)(props,"VStack");return(0,hook.R)({direction:"column",expanded,alignment,...otherProps})}(props);return(0,jsx_runtime.jsx)(component.Z,{...vStackProps,ref:forwardedRef})}UnconnectedVStack.displayName="UnconnectedVStack";const v_stack_component=(0,context_connect.Iq)(UnconnectedVStack,"VStack")},"./packages/html-entities/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{let _decodeTextArea;function decodeEntities(html){if("string"!=typeof html||-1===html.indexOf("&"))return html;void 0===_decodeTextArea&&(_decodeTextArea=document.implementation&&document.implementation.createHTMLDocument?document.implementation.createHTMLDocument("").createElement("textarea"):document.createElement("textarea")),_decodeTextArea.innerHTML=html;const decoded=_decodeTextArea.textContent;return _decodeTextArea.innerHTML="",decoded}__webpack_require__.d(__webpack_exports__,{S:()=>decodeEntities})},"./packages/components/src/query-controls/stories/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,SelectSingleCategory:()=>SelectSingleCategory,default:()=>stories});var react=__webpack_require__("./node_modules/react/index.js"),build_module=__webpack_require__("./packages/i18n/build-module/index.js");const ensureParentsAreDefined=terms=>terms.every((term=>null!==term.parent));function buildTermsTree(flatTerms){const flatTermsWithParentAndChildren=flatTerms.map((term=>({children:[],parent:null,...term,id:String(term.id)})));if(!ensureParentsAreDefined(flatTermsWithParentAndChildren))return flatTermsWithParentAndChildren;const termsByParent=flatTermsWithParentAndChildren.reduce(((acc,term)=>{const{parent}=term;return acc[parent]||(acc[parent]=[]),acc[parent].push(term),acc}),{}),fillWithChildren=terms=>terms.map((term=>{const children=termsByParent[term.id];return{...term,children:children&&children.length?fillWithChildren(children):[]}}));return fillWithChildren(termsByParent[0]||[])}var tree_select=__webpack_require__("./packages/components/src/tree-select/index.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function AuthorSelect({label,noOptionLabel,authorList,selectedAuthorId,onChange:onChangeProp}){if(!authorList)return null;const termsTree=buildTermsTree(authorList);return(0,jsx_runtime.jsx)(tree_select.Z,{label,noOptionLabel,onChange:onChangeProp,tree:termsTree,selectedId:void 0!==selectedAuthorId?String(selectedAuthorId):void 0,__nextHasNoMarginBottom:!0})}function CategorySelect({label,noOptionLabel,categoriesList,selectedCategoryId,onChange:onChangeProp,...props}){const termsTree=(0,react.useMemo)((()=>buildTermsTree(categoriesList)),[categoriesList]);return(0,jsx_runtime.jsx)(tree_select.Z,{label,noOptionLabel,onChange:onChangeProp,tree:termsTree,selectedId:void 0!==selectedCategoryId?String(selectedCategoryId):void 0,...props,__nextHasNoMarginBottom:!0})}AuthorSelect.displayName="AuthorSelect",CategorySelect.displayName="CategorySelect";var form_token_field=__webpack_require__("./packages/components/src/form-token-field/index.tsx"),range_control=__webpack_require__("./packages/components/src/range-control/index.tsx"),select_control=__webpack_require__("./packages/components/src/select-control/index.tsx"),component=__webpack_require__("./packages/components/src/v-stack/component.tsx");function isSingleCategorySelection(props){return"categoriesList"in props}function isMultipleCategorySelection(props){return"categorySuggestions"in props}function QueryControls({authorList,selectedAuthorId,numberOfItems,order,orderBy,maxItems=100,minItems=1,onAuthorChange,onNumberOfItemsChange,onOrderChange,onOrderByChange,...props}){return(0,jsx_runtime.jsx)(component.Z,{spacing:"4",className:"components-query-controls",children:[onOrderChange&&onOrderByChange&&(0,jsx_runtime.jsx)(select_control.Z,{__nextHasNoMarginBottom:!0,label:(0,build_module.__)("Order by"),value:`${orderBy}/${order}`,options:[{label:(0,build_module.__)("Newest to oldest"),value:"date/desc"},{label:(0,build_module.__)("Oldest to newest"),value:"date/asc"},{label:(0,build_module.__)("A → Z"),value:"title/asc"},{label:(0,build_module.__)("Z → A"),value:"title/desc"}],onChange:value=>{if("string"!=typeof value)return;const[newOrderBy,newOrder]=value.split("/");newOrder!==order&&onOrderChange(newOrder),newOrderBy!==orderBy&&onOrderByChange(newOrderBy)}},"query-controls-order-select"),isSingleCategorySelection(props)&&props.categoriesList&&props.onCategoryChange&&(0,jsx_runtime.jsx)(CategorySelect,{categoriesList:props.categoriesList,label:(0,build_module.__)("Category"),noOptionLabel:(0,build_module.__)("All"),selectedCategoryId:props.selectedCategoryId,onChange:props.onCategoryChange},"query-controls-category-select"),isMultipleCategorySelection(props)&&props.categorySuggestions&&props.onCategoryChange&&(0,jsx_runtime.jsx)(form_token_field.Z,{__nextHasNoMarginBottom:!0,label:(0,build_module.__)("Categories"),value:props.selectedCategories&&props.selectedCategories.map((item=>({id:item.id,value:item.name||item.value}))),suggestions:Object.keys(props.categorySuggestions),onChange:props.onCategoryChange,maxSuggestions:20},"query-controls-categories-select"),onAuthorChange&&(0,jsx_runtime.jsx)(AuthorSelect,{authorList,label:(0,build_module.__)("Author"),noOptionLabel:(0,build_module.__)("All"),selectedAuthorId,onChange:onAuthorChange},"query-controls-author-select"),onNumberOfItemsChange&&(0,jsx_runtime.jsx)(range_control.Z,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,build_module.__)("Number of items"),value:numberOfItems,onChange:onNumberOfItemsChange,min:minItems,max:maxItems,required:!0},"query-controls-range-control")]})}QueryControls.displayName="QueryControls";const query_controls=QueryControls;const stories={title:"Components/QueryControls",component:query_controls,argTypes:{numberOfItems:{control:{type:null}},order:{control:{type:null}},orderBy:{control:{type:null}},selectedAuthorId:{control:{type:null}},selectedCategories:{control:{type:null}},selectedCategoryId:{control:{type:null}}},parameters:{sourceLink:"packages/components/src/query-controls",actions:{argTypesRegex:"^on.*"},controls:{expanded:!0},docs:{source:{state:"open"}}}},Default=args=>{const{onAuthorChange,onCategoryChange,onNumberOfItemsChange,onOrderByChange,onOrderChange,...props}=args,[ownNumberOfItems,setOwnNumberOfItems]=(0,react.useState)(props.numberOfItems),[ownOrder,setOwnOrder]=(0,react.useState)(props.order),[ownOrderBy,setOwnOrderBy]=(0,react.useState)(props.orderBy),[ownSelectedAuthorId,setOwnSelectedAuthorId]=(0,react.useState)(props.selectedAuthorId),[ownSelectedCategories,setOwnSelectedCategories]=(0,react.useState)(props.selectedCategories);return(0,jsx_runtime.jsx)(query_controls,{...props,numberOfItems:ownNumberOfItems,onCategoryChange:tokens=>{onCategoryChange?.(tokens);if(tokens.some((token=>"string"==typeof token&&!props.categorySuggestions?.[token])))return;const allCategories=tokens.map((token=>"string"==typeof token?props.categorySuggestions?.[token]:token)).filter(Boolean);setOwnSelectedCategories(allCategories)},onOrderByChange:newOrderBy=>{onOrderByChange?.(newOrderBy),setOwnOrderBy(newOrderBy)},onOrderChange:newOrder=>{onOrderChange?.(newOrder),setOwnOrder(newOrder)},order:ownOrder,orderBy:ownOrderBy,onNumberOfItemsChange:newNumber=>{onNumberOfItemsChange?.(newNumber),setOwnNumberOfItems(newNumber)},onAuthorChange:newAuthor=>{onAuthorChange?.(newAuthor),setOwnSelectedAuthorId(Number(newAuthor))},selectedAuthorId:ownSelectedAuthorId,selectedCategories:ownSelectedCategories})};Default.displayName="Default",Default.args={authorList:[{id:1,name:"admin"},{id:2,name:"editor"}],categorySuggestions:{TypeScript:{id:11,name:"TypeScript",parent:0},JavaScript:{id:12,name:"JavaScript",parent:0}},selectedCategories:[{id:11,name:"JavaScript",parent:0}],numberOfItems:5,order:"desc",orderBy:"date",selectedAuthorId:1};const SingleCategoryTemplate=args=>{const{onAuthorChange,onCategoryChange,onNumberOfItemsChange,onOrderByChange,onOrderChange,...props}=args,[ownOrder,setOwnOrder]=(0,react.useState)(props.order),[ownOrderBy,setOwnOrderBy]=(0,react.useState)(props.orderBy),[ownSelectedCategoryId,setSelectedCategoryId]=(0,react.useState)(props.selectedCategoryId);return(0,jsx_runtime.jsx)(query_controls,{...props,onCategoryChange:newCategory=>{onCategoryChange?.(newCategory),setSelectedCategoryId(Number(newCategory))},onOrderByChange:newOrderBy=>{setOwnOrderBy(newOrderBy)},onOrderChange:newOrder=>{onOrderChange?.(newOrder),setOwnOrder(newOrder)},order:ownOrder,orderBy:ownOrderBy,selectedCategoryId:ownSelectedCategoryId})};SingleCategoryTemplate.displayName="SingleCategoryTemplate";const SelectSingleCategory=SingleCategoryTemplate.bind({});SelectSingleCategory.args={categoriesList:[{id:11,name:"TypeScript",parent:0},{id:12,name:"JavaScript",parent:0}],selectedCategoryId:11}}}]);