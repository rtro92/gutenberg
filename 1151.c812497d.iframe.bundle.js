"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[1151],{"./packages/components/src/base-control/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Xp:()=>BaseControl,ZP:()=>__WEBPACK_DEFAULT_EXPORT__});var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_visually_hidden__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/src/visually-hidden/component.tsx"),_styles_base_control_styles__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/src/base-control/styles/base-control-styles.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const BaseControl=({__nextHasNoMarginBottom=!1,id,label,hideLabelFromVision=!1,help,className,children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_styles_base_control_styles__WEBPACK_IMPORTED_MODULE_2__.im,{className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-base-control",className),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_styles_base_control_styles__WEBPACK_IMPORTED_MODULE_2__.ob,{className:"components-base-control__field",__nextHasNoMarginBottom,children:[label&&id&&(hideLabelFromVision?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_visually_hidden__WEBPACK_IMPORTED_MODULE_3__.Z,{as:"label",htmlFor:id,children:label}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_styles_base_control_styles__WEBPACK_IMPORTED_MODULE_2__.ar,{className:"components-base-control__label",htmlFor:id,children:label})),label&&!id&&(hideLabelFromVision?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_visually_hidden__WEBPACK_IMPORTED_MODULE_3__.Z,{as:"label",children:label}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(BaseControl.VisualLabel,{children:label})),children]}),!!help&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_styles_base_control_styles__WEBPACK_IMPORTED_MODULE_2__.vB,{id:id?id+"__help":void 0,className:"components-base-control__help",__nextHasNoMarginBottom,children:help})]});BaseControl.displayName="BaseControl";const VisualLabel=({className,children,...props})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_styles_base_control_styles__WEBPACK_IMPORTED_MODULE_2__.yF,{...props,className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-base-control__label",className),children});VisualLabel.displayName="VisualLabel",BaseControl.VisualLabel=VisualLabel;const __WEBPACK_DEFAULT_EXPORT__=BaseControl},"./packages/components/src/input-control/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{gs:()=>InputControl,ZP:()=>input_control});var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),react=__webpack_require__("./node_modules/react/index.js"),input_base=__webpack_require__("./packages/components/src/input-control/input-base.tsx"),use_gesture_react_esm=__webpack_require__("./node_modules/@use-gesture/react/dist/use-gesture-react.esm.js");var input_control_styles=__webpack_require__("./packages/components/src/input-control/styles/input-control-styles.tsx");const initialStateReducer=state=>state,initialInputControlState={error:null,initialValue:"",isDirty:!1,isDragEnabled:!1,isDragging:!1,isPressEnterToChange:!1,value:""};var actions=__webpack_require__("./packages/components/src/input-control/reducer/actions.ts");function useInputControlStateReducer(stateReducer=initialStateReducer,initialState=initialInputControlState,onChangeHandler){const[state,dispatch]=(0,react.useReducer)(function inputControlStateReducer(composedStateReducers){return(state,action)=>{const nextState={...state};switch(action.type){case actions.jx:return nextState.value=action.payload.value,nextState.isDirty=!1,nextState._event=void 0,nextState;case actions.Oh:case actions.LX:nextState.isDirty=!1;break;case actions.nv:nextState.isDragging=!0;break;case actions.Sv:nextState.isDragging=!1;break;case actions.Ve:nextState.error=null,nextState.value=action.payload.value,state.isPressEnterToChange&&(nextState.isDirty=!0);break;case actions.g:nextState.value=action.payload.value,nextState.isDirty=!1;break;case actions.td:nextState.error=null,nextState.isDirty=!1,nextState.value=action.payload.value||state.initialValue;break;case actions.WT:nextState.error=action.payload.error}return nextState._event=action.payload.event,composedStateReducers(nextState,action)}}(stateReducer),function mergeInitialState(initialState=initialInputControlState){const{value}=initialState;return{...initialInputControlState,...initialState,initialValue:value}}(initialState)),createChangeEvent=type=>(nextValue,event)=>{dispatch({type,payload:{value:nextValue,event}})},createKeyEvent=type=>event=>{dispatch({type,payload:{event}})},createDragEvent=type=>payload=>{dispatch({type,payload})},change=createChangeEvent(actions.Ve),reset=createChangeEvent(actions.td),commit=createChangeEvent(actions.g),dragStart=createDragEvent(actions.nv),drag=createDragEvent(actions.Wp),dragEnd=createDragEvent(actions.Sv),pressUp=createKeyEvent(actions.Oh),pressDown=createKeyEvent(actions.LX),pressEnter=createKeyEvent(actions.Q4),currentState=(0,react.useRef)(state),refProps=(0,react.useRef)({value:initialState.value,onChangeHandler});return(0,react.useLayoutEffect)((()=>{currentState.current=state,refProps.current={value:initialState.value,onChangeHandler}})),(0,react.useLayoutEffect)((()=>{var _state$value;void 0===currentState.current._event||state.value===refProps.current.value||state.isDirty||refProps.current.onChangeHandler(null!==(_state$value=state.value)&&void 0!==_state$value?_state$value:"",{event:currentState.current._event})}),[state.value,state.isDirty]),(0,react.useLayoutEffect)((()=>{var _initialState$value;initialState.value===currentState.current.value||currentState.current.isDirty||dispatch({type:actions.jx,payload:{value:null!==(_initialState$value=initialState.value)&&void 0!==_initialState$value?_initialState$value:""}})}),[initialState.value]),{change,commit,dispatch,drag,dragEnd,dragStart,invalidate:(error,event)=>dispatch({type:actions.WT,payload:{error,event}}),pressDown,pressEnter,pressUp,reset,state}}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const noop=()=>{};function InputField({disabled=!1,dragDirection="n",dragThreshold=10,id,isDragEnabled=!1,isFocused,isPressEnterToChange=!1,onBlur=noop,onChange=noop,onDrag=noop,onDragEnd=noop,onDragStart=noop,onFocus=noop,onKeyDown=noop,onValidate=noop,size="default",setIsFocused,stateReducer=state=>state,value:valueProp,type,...props},ref){const{state,change,commit,drag,dragEnd,dragStart,invalidate,pressDown,pressEnter,pressUp,reset}=useInputControlStateReducer(stateReducer,{isDragEnabled,value:valueProp,isPressEnterToChange},onChange),{value,isDragging,isDirty}=state,wasDirtyOnBlur=(0,react.useRef)(!1),dragCursor=function useDragCursor(isDragging,dragDirection){const dragCursor=function getDragCursor(dragDirection){let dragCursor="ns-resize";switch(dragDirection){case"n":case"s":dragCursor="ns-resize";break;case"e":case"w":dragCursor="ew-resize"}return dragCursor}(dragDirection);return(0,react.useEffect)((()=>{document.documentElement.style.cursor=isDragging?dragCursor:null}),[isDragging,dragCursor]),dragCursor}(isDragging,dragDirection),handleOnCommit=event=>{const nextValue=event.currentTarget.value;try{onValidate(nextValue),commit(nextValue,event)}catch(err){invalidate(err,event)}},dragGestureProps=(0,use_gesture_react_esm.c0)((dragProps=>{const{distance,dragging,event,target}=dragProps;if(dragProps.event={...dragProps.event,target},distance){if(event.stopPropagation(),!dragging)return onDragEnd(dragProps),void dragEnd(dragProps);onDrag(dragProps),drag(dragProps),isDragging||(onDragStart(dragProps),dragStart(dragProps))}}),{axis:"e"===dragDirection||"w"===dragDirection?"x":"y",threshold:dragThreshold,enabled:isDragEnabled,pointer:{capture:!1}}),dragProps=isDragEnabled?dragGestureProps():{};let handleOnMouseDown;return"number"===type&&(handleOnMouseDown=event=>{props.onMouseDown?.(event),event.currentTarget!==event.currentTarget.ownerDocument.activeElement&&event.currentTarget.focus()}),(0,jsx_runtime.jsx)(input_control_styles.II,{...props,...dragProps,className:"components-input-control__input",disabled,dragCursor,isDragging,id,onBlur:event=>{onBlur(event),setIsFocused?.(!1),!isDirty&&event.target.validity.valid||(wasDirtyOnBlur.current=!0,handleOnCommit(event))},onChange:event=>{const nextValue=event.target.value;change(nextValue,event)},onFocus:event=>{onFocus(event),setIsFocused?.(!0)},onKeyDown:event=>{const{key}=event;switch(onKeyDown(event),key){case"ArrowUp":pressUp(event);break;case"ArrowDown":pressDown(event);break;case"Enter":pressEnter(event),isPressEnterToChange&&(event.preventDefault(),handleOnCommit(event));break;case"Escape":isPressEnterToChange&&isDirty&&(event.preventDefault(),reset(valueProp,event))}},onMouseDown:handleOnMouseDown,ref,inputSize:size,value:null!=value?value:"",type})}InputField.displayName="InputField";const input_field=(0,react.forwardRef)(InputField);var space=__webpack_require__("./packages/components/src/ui/utils/space.ts"),base_control=__webpack_require__("./packages/components/src/base-control/index.tsx");const input_control_noop=()=>{};function UnforwardedInputControl({__next36pxDefaultSize,__unstableStateReducer:stateReducer=(state=>state),__unstableInputWidth,className,disabled=!1,help,hideLabelFromVision=!1,id:idProp,isPressEnterToChange=!1,label,labelPosition="top",onChange=input_control_noop,onValidate=input_control_noop,onKeyDown=input_control_noop,prefix,size="default",style,suffix,value,...props},ref){const[isFocused,setIsFocused]=(0,react.useState)(!1),id=function useUniqueId(idProp){const instanceId=(0,use_instance_id.Z)(InputControl);return idProp||`inspector-input-control-${instanceId}`}(idProp),classes=classnames_default()("components-input-control",className),draftHookProps=function useDraft(props){const refPreviousValue=(0,react.useRef)(props.value),[draft,setDraft]=(0,react.useState)({}),value=void 0!==draft.value?draft.value:props.value;return(0,react.useLayoutEffect)((()=>{const{current:previousValue}=refPreviousValue;refPreviousValue.current=props.value,void 0===draft.value||draft.isStale?draft.isStale&&props.value!==previousValue&&setDraft({}):setDraft({...draft,isStale:!0})}),[props.value,draft]),{value,onBlur:event=>{setDraft({}),props.onBlur?.(event)},onChange:(nextValue,extra)=>{setDraft((current=>Object.assign(current,{value:nextValue,isStale:!1}))),props.onChange(nextValue,extra)}}}({value,onBlur:props.onBlur,onChange}),helpProp=help?{["string"==typeof help?"aria-describedby":"aria-details"]:`${id}__help`}:{};return(0,jsx_runtime.jsx)(base_control.ZP,{className:classes,help,id,__nextHasNoMarginBottom:!0,children:(0,jsx_runtime.jsx)(input_base.Z,{__next36pxDefaultSize,__unstableInputWidth,disabled,gap:3,hideLabelFromVision,id,isFocused,justify:"left",label,labelPosition,prefix,size,style,suffix,children:(0,jsx_runtime.jsx)(input_field,{...props,...helpProp,__next36pxDefaultSize,className:"components-input-control__input",disabled,id,isFocused,isPressEnterToChange,onKeyDown,onValidate,paddingInlineStart:prefix?(0,space.D)(2):void 0,paddingInlineEnd:suffix?(0,space.D)(2):void 0,ref,setIsFocused,size,stateReducer,...draftHookProps})})})}UnforwardedInputControl.displayName="UnforwardedInputControl";const InputControl=(0,react.forwardRef)(UnforwardedInputControl),input_control=InputControl},"./packages/components/src/input-control/reducer/actions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ve:()=>CHANGE,g:()=>COMMIT,jx:()=>CONTROL,Sv:()=>DRAG_END,nv:()=>DRAG_START,Wp:()=>DRAG,WT:()=>INVALIDATE,LX:()=>PRESS_DOWN,Q4:()=>PRESS_ENTER,Oh:()=>PRESS_UP,td:()=>RESET});const CHANGE="CHANGE",COMMIT="COMMIT",CONTROL="CONTROL",DRAG_END="DRAG_END",DRAG_START="DRAG_START",DRAG="DRAG",INVALIDATE="INVALIDATE",PRESS_DOWN="PRESS_DOWN",PRESS_ENTER="PRESS_ENTER",PRESS_UP="PRESS_UP",RESET="RESET"}}]);